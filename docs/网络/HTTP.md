# HTTP

- 定义
- 超文本是用超链接的方法，将各种不同空间的文字信息组织在一起的网状文本

## HTTP/0.9
- 只支持get请求，响应为html文档格式的字符串
## HTTP/1.0
- 支持get、post、head
- 包含基本的头信息、状态码等
- 支持各种数据类型

**缺点：**
1. 一个请求发送一个请求，之后连接就关闭。
2. connection：keep-alive的设置不是标准字段，不同浏览器的实现不一致

## HTTP/1.1
- tcp连接默认不关闭
    - 可以被多个请求复用，不用声明connection：keep-alive，
    - 客户端发现对方一段时间没有活动自动关闭connection：close。规范的做法是在最后一个请求发送connection：close
    - 同一个域名，一般允许同时建立**6**个持久连接
- 管道机制
    - 在一个tcp连接里，客户端可以同时发送多个请求，不用等前面的收到回应再发送
    -  content-length字段声明本次回应的数据长度，区分数据包
- 分块传输编码
   - transfer-encoding：chunked表示回应将由数量未定的数据块组成，取代content-length
   - 数据之前，16进制数值表示块长度，最后大小为0的块表明本次传输完成
- 新的方法例如put、patch、head、options、delete
- host头域：将请求发往同一台服务器上的不同网站

**缺点**
- 一个tcp连接的通信是的服务器回应按照次序进行的，要是有一个回应特别慢，会发生队头阻塞。

## HTTP/2:基于SPDY协议

- 二进制分帧
    - HTTP/1.1 版的头信息肯定是文本（ASCII编码），数据体可以是文本，也可以是二进制。HTTP/2 则是一个彻底的二进制协议，头信息和数据体都是二进制，并且统称为"帧"（frame）：头信息帧和数据帧。
- 多路复用
    - 客户端和服务端可以同时发送数据，不管顺序
- 服务端推送
- 头部压缩
    - 头信息使用gzip或compress压缩后再发送；另一方面，客户端和服务器同时维护一张头信息表，所有字段都会存入这个表，生成一个索引号，以后就不发送同样字段了，只发送索引号，这样就提高速度了。

参考：

[HTTP 协议入门](http://www.ruanyifeng.com/blog/2016/08/http.html)



