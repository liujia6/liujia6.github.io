<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.13" />
    <style>
      :root {
        --c-bg: #fff;
      }

      html.dark {
        --c-bg: #22272e;
      }

      html,
      body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia('(prefers-color-scheme: dark)').matches
      if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
        document.documentElement.classList.toggle('dark', true)
      }
    </script>
    <link rel="icon" href="/favicon.ico"><title>游离 の Blog</title><meta name="description" content="">
    <link rel="preload" href="/assets/style-DADYFlon.css" as="style"><link rel="stylesheet" href="/assets/style-DADYFlon.css">
    <link rel="modulepreload" href="/assets/app-BYS36vur.js"><link rel="modulepreload" href="/assets/网络基础.html-CDGeHHAD.js">
    <link rel="prefetch" href="/assets/index.html-C0vaV-Q8.js" as="script"><link rel="prefetch" href="/assets/Error.html-DGtk3Zv3.js" as="script"><link rel="prefetch" href="/assets/RXJS.html-CVbdZQUj.js" as="script"><link rel="prefetch" href="/assets/ts.html-DrUlVPgb.js" as="script"><link rel="prefetch" href="/assets/二进制.html-C-i_W_Ax.js" as="script"><link rel="prefetch" href="/assets/基础.html-DTZlmurQ.js" as="script"><link rel="prefetch" href="/assets/异步.html-CXoWjvEq.js" as="script"><link rel="prefetch" href="/assets/手写代码系列.html-DYyN_QPd.js" as="script"><link rel="prefetch" href="/assets/类型转换.html-d83awUSN.js" as="script"><link rel="prefetch" href="/assets/错误处理.html-C2Z6_gWS.js" as="script"><link rel="prefetch" href="/assets/Vuejs设计与实现.html-Dy0lDYCV.js" as="script"><link rel="prefetch" href="/assets/keep-alive.html-o2fFztot.js" as="script"><link rel="prefetch" href="/assets/key值.html-BJMIzNDi.js" as="script"><link rel="prefetch" href="/assets/vue2响应式原理.html-DfUKepU3.js" as="script"><link rel="prefetch" href="/assets/vue3新特性.html-B0UmK71G.js" as="script"><link rel="prefetch" href="/assets/vue使用总结.html-B67x6YND.js" as="script"><link rel="prefetch" href="/assets/vue命名方式.html-BeoAZz0b.js" as="script"><link rel="prefetch" href="/assets/ansible.html-g5jUWaJo.js" as="script"><link rel="prefetch" href="/assets/bash.html-CUdr2QiO.js" as="script"><link rel="prefetch" href="/assets/docker.html-BiZAo7Vb.js" as="script"><link rel="prefetch" href="/assets/gitlab-ci.html-BT1X7389.js" as="script"><link rel="prefetch" href="/assets/linux.html-DnVqCRUo.js" as="script"><link rel="prefetch" href="/assets/nginx.html-ZJgrTcee.js" as="script"><link rel="prefetch" href="/assets/ssh.html-D-umq8DH.js" as="script"><link rel="prefetch" href="/assets/CSS.html-DuUhO882.js" as="script"><link rel="prefetch" href="/assets/less_postcss.html-CpBPZYic.js" as="script"><link rel="prefetch" href="/assets/index.html-Bfu7LHWp.js" as="script"><link rel="prefetch" href="/assets/babel.html-xjItmTE0.js" as="script"><link rel="prefetch" href="/assets/git.html-BIrvJEk8.js" as="script"><link rel="prefetch" href="/assets/package.json.html-uzA7lmne.js" as="script"><link rel="prefetch" href="/assets/webpack.html-w6lxpkra.js" as="script"><link rel="prefetch" href="/assets/代码风格统一指南.html-DIYzqUog.js" as="script"><link rel="prefetch" href="/assets/模块化.html-CS9vE-BC.js" as="script"><link rel="prefetch" href="/assets/测试.html-DnuACrVv.js" as="script"><link rel="prefetch" href="/assets/OAuth2与微信登陆.html-BngLLKud.js" as="script"><link rel="prefetch" href="/assets/index.html-CPhXWsnK.js" as="script"><link rel="prefetch" href="/assets/微前端.html-Bm_Caomy.js" as="script"><link rel="prefetch" href="/assets/移动端适配.html-eP-Tt_qx.js" as="script"><link rel="prefetch" href="/assets/页面渲染探索和演进.html-VlyjKBV4.js" as="script"><link rel="prefetch" href="/assets/index.html-DkLNw5m9.js" as="script"><link rel="prefetch" href="/assets/a-life-of-a-pixel浏览器渲染.html-C1yQA908.js" as="script"><link rel="prefetch" href="/assets/layoutNG.html-CYgKIr5m.js" as="script"><link rel="prefetch" href="/assets/变化.html-DyUvd37t.js" as="script"><link rel="prefetch" href="/assets/浏览器架构.html-Bq4XR2w-.js" as="script"><link rel="prefetch" href="/assets/index.html-BYKO3Qh5.js" as="script"><link rel="prefetch" href="/assets/买卖股票.html-DYs8rL2X.js" as="script"><link rel="prefetch" href="/assets/二叉树.html-g4bDRvh5.js" as="script"><link rel="prefetch" href="/assets/其他构造类.html-ByBkbgg2.js" as="script"><link rel="prefetch" href="/assets/动态规划.html-DVc5fa60.js" as="script"><link rel="prefetch" href="/assets/十大排序.html-tlHWKIUm.js" as="script"><link rel="prefetch" href="/assets/双指针.html-BcNoNGcd.js" as="script"><link rel="prefetch" href="/assets/回溯.html-Cql3Rnbk.js" as="script"><link rel="prefetch" href="/assets/子串子序列系列.html-CA__4NJH.js" as="script"><link rel="prefetch" href="/assets/字符串.html-yrEGjRxz.js" as="script"><link rel="prefetch" href="/assets/排序相关.html-DKxakirD.js" as="script"><link rel="prefetch" href="/assets/数学.html-C7a3Xyu_.js" as="script"><link rel="prefetch" href="/assets/数组.html-BGcEXTkB.js" as="script"><link rel="prefetch" href="/assets/栈.html-RlJlyWup.js" as="script"><link rel="prefetch" href="/assets/背包.html-BpBkXWLX.js" as="script"><link rel="prefetch" href="/assets/链表.html-diPpfGxH.js" as="script"><link rel="prefetch" href="/assets/airbnb.html-Bj8kHMcG.js" as="script"><link rel="prefetch" href="/assets/plantuml.html-GuAU9e4n.js" as="script"><link rel="prefetch" href="/assets/函数式编程.html-C191Ha5X.js" as="script"><link rel="prefetch" href="/assets/架构整洁之道.html-6o2FOIRj.js" as="script"><link rel="prefetch" href="/assets/状态机.html-DnbSirk7.js" as="script"><link rel="prefetch" href="/assets/设计模式.html-BCVHmWuv.js" as="script"><link rel="prefetch" href="/assets/重构.html-DSK9uFIi.js" as="script"><link rel="prefetch" href="/assets/HTTP.html-BU-_wIYK.js" as="script"><link rel="prefetch" href="/assets/HTTP权威指南.html-CUVgiYBj.js" as="script"><link rel="prefetch" href="/assets/TCP-UDP.html-B8J0jf_y.js" as="script"><link rel="prefetch" href="/assets/grpc.html-VKbS4PfI.js" as="script"><link rel="prefetch" href="/assets/web状态存储.html-DfKQvwKu.js" as="script"><link rel="prefetch" href="/assets/web安全.html-C51FNuy6.js" as="script"><link rel="prefetch" href="/assets/UDP.html-Bmoo1LX-.js" as="script"><link rel="prefetch" href="/assets/404.html-qO4hmvmC.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon"><!--[--><header class="vp-navbar"><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/"><!----><span class="vp-site-name" aria-hidden="true">游离 の Blog</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/liujia6/liujia6.github.io" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!---->GitHub<!----></a></div><!--]--></nav><!--[--><!--]--><button class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar"><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/liujia6/liujia6.github.io" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!---->GitHub<!----></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading"> <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/JS/%E5%9F%BA%E7%A1%80.html" aria-label="基础"><!---->基础<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/JS/%E5%BC%82%E6%AD%A5.html" aria-label="异步"><!---->异步<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/JS/Error.html" aria-label="/JS/Error.html"><!---->/JS/Error.html<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/JS/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86.html" aria-label="错误处理的应用"><!---->错误处理的应用<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/JS/%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2.html" aria-label="JS 类型与转换"><!---->JS 类型与转换<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/JS/%E6%89%8B%E5%86%99%E4%BB%A3%E7%A0%81%E7%B3%BB%E5%88%97.html" aria-label="手写代码"><!---->手写代码<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/JS/ts.html" aria-label="/JS/ts.html"><!---->/JS/ts.html<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/JS/RXJS.html" aria-label="RXJS"><!---->RXJS<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading"> <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/dev-ops/ssh.html" aria-label="ssh"><!---->ssh<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/dev-ops/linux.html" aria-label="linux 总结"><!---->linux 总结<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/dev-ops/nginx.html" aria-label="nginx"><!---->nginx<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/dev-ops/gitlab-ci.html" aria-label="/dev-ops/gitlab-ci.html"><!---->/dev-ops/gitlab-ci.html<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/dev-ops/ansible.html" aria-label="ansible"><!---->ansible<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/dev-ops/docker.html" aria-label="/dev-ops/docker.html"><!---->/dev-ops/docker.html<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading"> <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/Vue/vue2%E5%93%8D%E5%BA%94%E5%BC%8F%E5%8E%9F%E7%90%86.html" aria-label="Vue 响应式原理"><!---->Vue 响应式原理<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/Vue/vue3%E6%96%B0%E7%89%B9%E6%80%A7.html" aria-label="vue3新特性"><!---->vue3新特性<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/Vue/key%E5%80%BC.html" aria-label="vue 中 key 值的作用"><!---->vue 中 key 值的作用<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/Vue/vue%E5%91%BD%E5%90%8D%E6%96%B9%E5%BC%8F.html" aria-label="vue 命名规范"><!---->vue 命名规范<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/Vue/vue%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93.html" aria-label="vue 使用总结"><!---->vue 使用总结<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/Vue/Vuejs%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0.html" aria-label="/Vue/Vuejs%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0.html"><!---->/Vue/Vuejs%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0.html<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/Vue/keep-alive.html" aria-label="keep-alive 缓存"><!---->keep-alive 缓存<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading"> <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/%E5%B7%A5%E7%A8%8B%E5%8C%96/git.html" aria-label="git"><!---->git<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E5%B7%A5%E7%A8%8B%E5%8C%96/package.json.html" aria-label="package.json"><!---->package.json<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E5%B7%A5%E7%A8%8B%E5%8C%96/%E4%BB%A3%E7%A0%81%E9%A3%8E%E6%A0%BC%E7%BB%9F%E4%B8%80%E6%8C%87%E5%8D%97.html" aria-label="代码风格统一指南"><!---->代码风格统一指南<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E5%B7%A5%E7%A8%8B%E5%8C%96/babel.html" aria-label="/%E5%B7%A5%E7%A8%8B%E5%8C%96/babel.html"><!---->/%E5%B7%A5%E7%A8%8B%E5%8C%96/babel.html<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E5%B7%A5%E7%A8%8B%E5%8C%96/webpack.html" aria-label="webpack"><!---->webpack<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E5%B7%A5%E7%A8%8B%E5%8C%96/%E6%A8%A1%E5%9D%97%E5%8C%96.html" aria-label="模块化"><!---->模块化<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E5%B7%A5%E7%A8%8B%E5%8C%96/%E6%B5%8B%E8%AF%95.html" aria-label="/%E5%B7%A5%E7%A8%8B%E5%8C%96/%E6%B5%8B%E8%AF%95.html"><!---->/%E5%B7%A5%E7%A8%8B%E5%8C%96/%E6%B5%8B%E8%AF%95.html<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading"> <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%AE%97%E6%B3%95/%E5%8D%81%E5%A4%A7%E6%8E%92%E5%BA%8F.html" aria-label="/%E7%AE%97%E6%B3%95/%E5%8D%81%E5%A4%A7%E6%8E%92%E5%BA%8F.html"><!---->/%E7%AE%97%E6%B3%95/%E5%8D%81%E5%A4%A7%E6%8E%92%E5%BA%8F.html<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%9B%B8%E5%85%B3.html" aria-label="/%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%9B%B8%E5%85%B3.html"><!---->/%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%9B%B8%E5%85%B3.html<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%AE%97%E6%B3%95/%E6%95%B0%E5%AD%A6.html" aria-label="/%E7%AE%97%E6%B3%95/%E6%95%B0%E5%AD%A6.html"><!---->/%E7%AE%97%E6%B3%95/%E6%95%B0%E5%AD%A6.html<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%AE%97%E6%B3%95/%E6%95%B0%E7%BB%84.html" aria-label="/%E7%AE%97%E6%B3%95/%E6%95%B0%E7%BB%84.html"><!---->/%E7%AE%97%E6%B3%95/%E6%95%B0%E7%BB%84.html<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%AE%97%E6%B3%95/%E9%93%BE%E8%A1%A8.html" aria-label="链表"><!---->链表<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%AE%97%E6%B3%95/%E6%A0%88.html" aria-label="/%E7%AE%97%E6%B3%95/%E6%A0%88.html"><!---->/%E7%AE%97%E6%B3%95/%E6%A0%88.html<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%AE%97%E6%B3%95/%E5%AD%97%E7%AC%A6%E4%B8%B2.html" aria-label="/%E7%AE%97%E6%B3%95/%E5%AD%97%E7%AC%A6%E4%B8%B2.html"><!---->/%E7%AE%97%E6%B3%95/%E5%AD%97%E7%AC%A6%E4%B8%B2.html<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%AE%97%E6%B3%95/%E5%AD%90%E4%B8%B2%E5%AD%90%E5%BA%8F%E5%88%97%E7%B3%BB%E5%88%97.html" aria-label="/%E7%AE%97%E6%B3%95/%E5%AD%90%E4%B8%B2%E5%AD%90%E5%BA%8F%E5%88%97%E7%B3%BB%E5%88%97.html"><!---->/%E7%AE%97%E6%B3%95/%E5%AD%90%E4%B8%B2%E5%AD%90%E5%BA%8F%E5%88%97%E7%B3%BB%E5%88%97.html<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%AE%97%E6%B3%95/%E4%BA%8C%E5%8F%89%E6%A0%91.html" aria-label="二叉树"><!---->二叉树<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%AE%97%E6%B3%95/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92.html" aria-label="动态规划"><!---->动态规划<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%AE%97%E6%B3%95/%E5%85%B6%E4%BB%96%E6%9E%84%E9%80%A0%E7%B1%BB.html" aria-label="其他构造类"><!---->其他构造类<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%AE%97%E6%B3%95/%E8%83%8C%E5%8C%85.html" aria-label="背包"><!---->背包<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%AE%97%E6%B3%95/%E4%B9%B0%E5%8D%96%E8%82%A1%E7%A5%A8.html" aria-label="/%E7%AE%97%E6%B3%95/%E4%B9%B0%E5%8D%96%E8%82%A1%E7%A5%A8.html"><!---->/%E7%AE%97%E6%B3%95/%E4%B9%B0%E5%8D%96%E8%82%A1%E7%A5%A8.html<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading active"> <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%BD%91%E7%BB%9C/HTTP.html" aria-label="HTTP"><!---->HTTP<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%BD%91%E7%BB%9C/HTTP%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97.html" aria-label="/%E7%BD%91%E7%BB%9C/HTTP%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97.html"><!---->/%E7%BD%91%E7%BB%9C/HTTP%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97.html<!----></a><!----></li><li><a class="route-link route-link-active auto-link vp-sidebar-item active" href="/%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80.html" aria-label="/%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80.html"><!---->/%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80.html<!----></a><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="#极客时间-趣谈网络协议笔记" aria-label="极客时间 趣谈网络协议笔记"><!---->极客时间 趣谈网络协议笔记<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="#为什么网络要分层" aria-label="为什么网络要分层"><!---->为什么网络要分层<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="#设备" aria-label="设备"><!---->设备<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="#网络层" aria-label="网络层"><!---->网络层<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="#硬件地址" aria-label="硬件地址"><!---->硬件地址<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="#物理层到-mac-层" aria-label="物理层到 MAC 层"><!---->物理层到 MAC 层<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="#ip" aria-label="IP"><!---->IP<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="#mac-层" aria-label="MAC 层"><!---->MAC 层<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="#ip-层工作" aria-label="IP 层工作"><!---->IP 层工作<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="#构建返回" aria-label="构建返回"><!---->构建返回<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="#路由协议" aria-label="路由协议"><!---->路由协议<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="#虚拟机" aria-label="虚拟机"><!---->虚拟机<!----></a><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="#tun-tap" aria-label="TUN/TAP"><!---->TUN/TAP<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item" href="#vlan" aria-label="VLAN"><!---->VLAN<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="#虚拟网卡" aria-label="虚拟网卡"><!---->虚拟网卡<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="#软件定义网络-sdn" aria-label="软件定义网络 SDN"><!---->软件定义网络 SDN<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="#rpc" aria-label="RPC"><!---->RPC<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="#vpc" aria-label="VPC"><!---->VPC<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="#vxlan" aria-label="VXLAN"><!---->VXLAN<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="#部署一个高可用的电商平台" aria-label="部署一个高可用的电商平台"><!---->部署一个高可用的电商平台<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="#查看" aria-label="查看"><!---->查看<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="#p2p-协议" aria-label="P2P 协议"><!---->P2P 协议<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="#虚拟机网络配置" aria-label="虚拟机网络配置"><!---->虚拟机网络配置<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%BD%91%E7%BB%9C/grpc.html" aria-label="grpc"><!---->grpc<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading"> <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/web%E5%AE%89%E5%85%A8.html" aria-label="web 安全"><!---->web 安全<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading"> <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%BC%96%E7%A8%8B/%E9%87%8D%E6%9E%84.html" aria-label="重构"><!---->重构<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%BC%96%E7%A8%8B/%E6%9E%B6%E6%9E%84%E6%95%B4%E6%B4%81%E4%B9%8B%E9%81%93.html" aria-label="架构整洁之道"><!---->架构整洁之道<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%BC%96%E7%A8%8B/%E7%8A%B6%E6%80%81%E6%9C%BA.html" aria-label="状态机"><!---->状态机<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%BC%96%E7%A8%8B/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html" aria-label="设计模式"><!---->设计模式<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%BC%96%E7%A8%8B/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html" aria-label="函数式编程"><!---->函数式编程<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%BC%96%E7%A8%8B/plantuml.html" aria-label="plantuml"><!---->plantuml<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%BC%96%E7%A8%8B/airbnb.html" aria-label="AirBNB"><!---->AirBNB<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading"> <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/%E6%96%B0%E6%8A%80%E6%9C%AF/%E5%BE%AE%E5%89%8D%E7%AB%AF.html" aria-label="如何管理日益庞大的项目"><!---->如何管理日益庞大的项目<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E6%96%B0%E6%8A%80%E6%9C%AF/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%80%82%E9%85%8D.html" aria-label="/%E6%96%B0%E6%8A%80%E6%9C%AF/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%80%82%E9%85%8D.html"><!---->/%E6%96%B0%E6%8A%80%E6%9C%AF/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%80%82%E9%85%8D.html<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/新技术/OAuth2.0与微信登陆.html" aria-label="/新技术/OAuth2.0与微信登陆.html"><!---->/新技术/OAuth2.0与微信登陆.html<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E6%96%B0%E6%8A%80%E6%9C%AF/%E9%A1%B5%E9%9D%A2%E6%B8%B2%E6%9F%93%E6%8E%A2%E7%B4%A2%E5%92%8C%E6%BC%94%E8%BF%9B.html" aria-label="页面渲染探索和演进"><!---->页面渲染探索和演进<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading"> <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/浏览器/README.html" aria-label="/浏览器/README.html"><!---->/浏览器/README.html<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E6%B5%8F%E8%A7%88%E5%99%A8/%E6%B5%8F%E8%A7%88%E5%99%A8%E6%9E%B6%E6%9E%84.html" aria-label="浏览器架构"><!---->浏览器架构<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E6%B5%8F%E8%A7%88%E5%99%A8/a-life-of-a-pixel%E6%B5%8F%E8%A7%88%E5%99%A8%E6%B8%B2%E6%9F%93.html" aria-label="A life of a pixel"><!---->A life of a pixel<!----></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h2 id="极客时间-趣谈网络协议笔记" tabindex="-1"><a class="header-anchor" href="#极客时间-趣谈网络协议笔记"><span>极客时间 <a href="https://time.geekbang.org/column/intro/85" target="_blank" rel="noopener noreferrer">趣谈网络协议</a>笔记</span></a></h2><h2 id="为什么网络要分层" tabindex="-1"><a class="header-anchor" href="#为什么网络要分层"><span>为什么网络要分层</span></a></h2><p>因为通信传送消息是一个复杂且庞大的工程，需要进行分层，各司其职，一步一步的完成相应的任务，让整个过程更加易于实现和维护，并且更加有灵活性，可微调，解耦，各层之间独立</p><h2 id="设备" tabindex="-1"><a class="header-anchor" href="#设备"><span>设备</span></a></h2><p>让时空穿越到上世纪 70 年代，Ethernet 被发明出来，需要用一个黑盒子将电脑连接起来；否则电脑和谁通信，和谁网线直连，这是点对点通信了，一点也不方便，和以太网的多路访问网络初衷相违背。</p><p>以太网设计目标：电脑使用一个网络接口，可以同时与多台电脑通信，将电脑连接起来的黑盒子最先面世，称之为集线器，但我们更喜欢叫它 Hub。</p><p>这种集线器，通常有多个端口，可以接入多台电脑，这种黑盒子使电脑连接在一起成为一种可能，其内部工作原理，就是信号放大器。</p><p>随着以太网的流行，越来越多的办公室使用它，网络变得越来越大，信号随着网线距离的变长，信号衰减的使得通信变得越发不可靠，同样需要可以将信号中继、放大的集线器。</p><p>但这个集线器只需两个端口，一端连着一根网线，由于其本来的目的就是延伸网线，美其名曰：网桥，这个更像描述其功能性的一面，“牵线搭桥”之意。</p><p>在集线器的基础上，添加了 MAC 地址学习功能，成为了交换机，这样可以避免集线器对所有帧都广播的弊病。</p><p>但这些设备依然都是桥接设备，因为帧经过它们时，帧原封不动。</p><p>但是随着无线局域网的诞生，关于桥接的定义被刷新，有线的 Ethernet II 帧访问无线 802.11 时，帧格式发生了变化，但依然称 AP（Access Point)为桥接设备，为何？因为一个广播帧可以无障碍通过 AP，AP 并没有分割广播域，所以依然是桥接设备。</p><h2 id="网络层" tabindex="-1"><a class="header-anchor" href="#网络层"><span>网络层</span></a></h2><p>网络层提供简单灵活的，无连接的，尽最大努力交付的数据包（分组）服务。</p><ul><li>IP 协议 使互联起来的许多计算机网络能够通信</li><li>ARP 地址解析协议</li><li>RARP 逆地址解析协议</li><li><a href="https://juejin.im/entry/5aa6a1c76fb9a028cb2d4972" target="_blank" rel="noopener noreferrer">ICMP</a> <a href="https://www.jianshu.com/p/5e46e84a7092" target="_blank" rel="noopener noreferrer">下</a> 网际控制报文协议,对上层协议报告数据包传递时的差错, ping 就是用的这个</li><li>IGMP 帮助路由器来管理其所在网络中可用的主机</li></ul><p>由于不同的用户有不同的网络需求。 我们根据网络的不同连接层次，有以下不同中间设备</p><table><thead><tr><th><a href="https://blog.csdn.net/qq_25606103/article/details/51288459" target="_blank" rel="noopener noreferrer">层</a></th><th style="text-align:left;">设备</th><th>作用</th></tr></thead><tbody><tr><td>物理层</td><td style="text-align:left;">中继器(转发器)、集线器(多接口的中继器)</td><td><strong>中继器</strong>，就是简单的信号放大器，信号在传输的过程中是要衰减的，中继器的作用就是将信号放大，使信号能传的更远。<strong>集线器</strong>，多端口的中继器，把每个输入端口的信号放大再发到别的端口去，集线器可以实现多台计算机之间的互联，因为它有很多的端口，每个口都能连计算机。</td></tr><tr><td>数据链路层</td><td style="text-align:left;">网桥、桥接器</td><td><strong>网桥</strong>：将两个局域网(LAN)连起来，根据 MAC 地址来转发帧，可以看作一个“低层的路由器；<strong>交换机</strong>：可以理解为高级的网桥，他有网桥的功能，但性能比网桥强。交换机和网桥的细微差别就在于：交换机常常用来连接独立的计算机，而网桥连接的目标是 LAN，所以交换机的端口较网桥多</td></tr><tr><td>网络层</td><td style="text-align:left;">路由器</td><td>为经过路由器的每个 IP 数据包寻找一条最佳传输路径，并将该数据有效地传送到目的站点。 路由器的基本功能是，把数据（IP 报文）传送到正确的网络</td></tr><tr><td>网络层以上</td><td style="text-align:left;">网关</td><td>由于历史原因，许多文献将网络层使用的路由器成为网关</td></tr></tbody></table><p>IP 地址={网络号，主机号}</p><p>一个网络是指具有相同网络号的主机集合，用桥接或转发器连接起来的局域网认为一个网络，不同网络号的局域网必须有路由器互连。</p><p>IP 地址分类的原因是为满足不同客户的需求，有的客户需要的可分配的主机号多，有的少，可以通过分类 IP 来实现</p><ul><li>IP 中可指派的网络号要减去 2</li><li>IP 中全 0 表示本网络，是保留地址</li><li>网络号中 127 保存为本地软件环回测试本主机的进程之间的通信，若主机发送一个目的地址为环回地址的数据报，则本主机中的协议软件就处理数据报中的数据，不会再进行转发。不能出圈</li><li>全 1 表示该网络上的所有主机</li></ul><h2 id="硬件地址" tabindex="-1"><a class="header-anchor" href="#硬件地址"><span>硬件地址</span></a></h2><p>在网络包里，有源 IP 地址和目标 IP 地址、源 MAC 地址和目标 MAC 地址。从路由表中取得下一跳的 IP 地址后，应该把这个地址放在哪里呢？如果放在目标 IP 地址里面，到了城关，谁知道最终的目标在哪里呢？所以要用 MAC 地址 所谓的下一跳，看起来是 IP 地址，其实是要通过 ARP 得到 MAC 地址，将下一跳的 MAC 地址 放在目标 MAC 地址里面。</p><p>物理地址是数据链路层和物理层使用的地址，IP 地址是网络层及以上使用的地址，是逻辑地址，用软件实现的</p><p>ip 数据报在通过数据链路层封装成 MAC 帧，使用首部为硬件地址作为源地址和目的地址。</p><p>通过源端口源 IP 地址和目的端口和地址，MAC 地址打包</p><p>光猫学名叫光调制解调器 光猫最主要的作用是把光纤传过来的光信号转成电信号</p><table><thead><tr><th>器件</th><th>作用</th></tr></thead><tbody><tr><td><a href="https://blog.csdn.net/tao546377318/article/details/51602298" target="_blank" rel="noopener noreferrer">网卡</a></td><td>网卡(Network Interface Card，简称 NIC)，也称网络适配器，是电脑与局域网相互连接的设备,要连接到局域网需要安装一块网卡,一块网卡包括 OSI 模型的两个层，物理层和数据链路层：由于其拥有 MAC 地址</td></tr><tr><td>子网掩码</td><td>确定是否在主机所在局域网内，不在发往默认网关，在的或就直接发往对应目的 IP</td></tr><tr><td>MAC 地址</td><td>身份证，不同的网卡放在一个网络里面的时候，可以不用担心冲突，有局限性，只能在子网内找到对应 MAC 地址</td></tr><tr><td>IP 地址</td><td>地址，路由转发功能，寻址用</td></tr><tr><td>集线器 Hub</td><td>采用广播，纯物理层，没有大脑，不能进行控制</td></tr></tbody></table><h2 id="物理层到-mac-层" tabindex="-1"><a class="header-anchor" href="#物理层到-mac-层"><span>物理层到 MAC 层</span></a></h2><h5 id="如何通过子网掩码判断是否在同一局域网内" tabindex="-1"><a class="header-anchor" href="#如何通过子网掩码判断是否在同一局域网内"><span>如何通过子网掩码判断是否在同一局域网内：</span></a></h5><ul><li>将子网掩码与 ip 地址&amp;运算得到网络号，相同则在，不同则不在 MAC 地址与 IP 地址，一个代表的目的与终点，一个代表着途中的经过,所以在到达目的局域网后，数据包并不知道要传输给哪台主机，因为 MAC 地址的变化，但是目的 IP 地址一直没有变化，所以此时就需要 ARP 协议来确定目的主机的 MAC 地址</li></ul><h5 id="arp-协议的工作原理" tabindex="-1"><a class="header-anchor" href="#arp-协议的工作原理"><span>ARP 协议的工作原理</span></a></h5><ol><li>当有新设备加入网络时，会主动广播自己的 MAC 与 IP。</li><li>当接收到 2.1 的信息的时候，本机建立一张对照表维护这个信息。</li><li>当需要发送数据报给一个 IP 时，到 2 建立的表中查询对应的 MAC 并发送。当查询不到信息的时候，广播一个查询申请，要求指定的 IP 的主机执行 2.1 动作，并在稍后重新执行本步骤。</li><li>子网掩码确定当目标地址同网（逻辑同网，即两个 IP 在与子网掩码进行 AND 计算后得出的网络名称相同），根据 2.3 策略直接发送数据；当目标地址不同网（逻辑不同网，即两个 IP 在与子网掩码进行 AND 计算后得出的网络名称不同），则根据 2.3 策略但将数据报发往默认网关 IP 对应的主机，由其负责路由代发</li><li>默认网关为一个默认路由，如果有更明确的路由记录，则直接发往路由指向的目标主机。</li></ol><h2 id="ip" tabindex="-1"><a class="header-anchor" href="#ip"><span>IP</span></a></h2><ul><li><p>IP 地址并不是根据主机台数来配置的，而是以网卡。像服务器、路由器等设备都是有 2 个以上的网卡，也就是它们会有 2 个以上的 IP 地址。</p></li><li><p>10.100.122.2/24，这个 IP 地址中有一个斜杠，斜杠后面有个数字 24。这种地址表示形式，就是 CIDR，后面 24 的意思是，32 位中，前 24 位是网络号，后 8 位是主机号</p></li><li><p>192.168.0.x 是最常用的私有 IP 地址。你家里有 Wi-Fi，对应就会有一个 IP 地址。一 般你家里地上网设备不会超过 256 个，所以 /24 基本就够了。有时候我们也能见到 /16 的 CIDR，这两种是最常见的，也是最容易理解的</p></li><li><p>而整个网络里面的第一个地址 192.168.0.1，往往就是你这个私有网络的出口地址。例如，你家里的 电脑连接 Wi-Fi，Wi-Fi 路由器的地址就是 192.168.0.1，而 192.168.0.255 就是广播地址。一 旦发送这个地址，整个 192.168.0 网络里面的所有机器都能收到</p></li></ul><p>查看 ip 命令</p><ul><li>Windows 上是 ipconfig，在 Linux 上是 ifconfig。</li><li>Linux 上还可以通过 ip addr 查看 ip 地址</li><li>ifconfig 和 ip addr 的区别，这是一个有关 net-tools 和 iproute2 的“历史”故 事</li></ul><h2 id="mac-层" tabindex="-1"><a class="header-anchor" href="#mac-层"><span>MAC 层</span></a></h2><p>通过<strong>Hub 集线器</strong>在物理层将多台主机连接到一起即可实现多台电脑组成局域网；由于没有 IP 地址，我们只能通过<strong>MAC 广播</strong>通信，由于广播通信不能达成一对一的通信，造成信息冗余，出现了数据链路层来进行访问控制，MAC 地址就是来解决组成的局域网内多台主机的通信问题的。如果没有交换机，我们只能在对应的主机上过滤信息，因为信息都是广播的，但是我们的信息常常是一对一发送的，所以我们用<strong>交换机</strong>来在转发的途中进行控制不必要的广播，一对一发送。</p><ul><li>MAC 层是用来解决多路访问的堵车问题的</li><li>ARP 是通过吼的方式来寻找目标 MAC 地址的，吼完之后记住一段时间，这个叫作缓 存；</li><li>交换机是有 MAC 地址学习能力的，学完了它就知道谁在哪儿了，不用广播了</li><li>数据链路层的功能 <ol><li>这个包是发给谁的？谁应该接收？</li><li>大家都在发，会不会产生混乱？有没有谁先发、谁后发的规则？</li><li>如果发送的时候出现了错误，怎么办？</li></ol></li><li>通过 MAC 地址来标识对方的身份，如果不知道可以用 ARP 查询，也即通过广播出去</li><li>MAC 帧有 CRC 冗余码检测采用异或检测是否有错误</li><li>不管三七二十一，有事儿先出门，发现特堵，就回去。错过高峰再出。我们叫作随 机接入协议。著名的以太网，用的就是这个方式。解决第二个问题</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">相关字段解释</span>
<span class="line">BROADCAST   该接口支持广播</span>
<span class="line">MULTICAST   该接口支持多播</span>
<span class="line">UP          网络接口已启用</span>
<span class="line">LOWER_UP    网络电缆已插入，设备已连接至网络</span>
<span class="line">mtu 1500                                    最大传输单位（数据包大小）为1,500字节</span>
<span class="line">qdisc pfifo_fast                            用于数据包排队</span>
<span class="line">state UP                                    网络接口已启用</span>
<span class="line">group default                               接口组</span>
<span class="line">qlen 1000                                   传输队列长度</span>
<span class="line">link/ether 00:1e:4f:c8:43:fc                接口的 MAC（硬件）地址</span>
<span class="line">brd ff:ff:ff:ff:ff:ff                       广播地址</span>
<span class="line">inet 192.168.0.24/24                        IPv4 地址</span>
<span class="line">brd 192.168.0.255                           广播地址</span>
<span class="line">scope global                                全局有效</span>
<span class="line">dynamic enp0s25                             地址是动态分配的</span>
<span class="line">valid_lft 80866sec                          IPv4 地址的有效使用期限</span>
<span class="line">preferred_lft 80866sec                      IPv4 地址的首选生存期</span>
<span class="line">inet6 fe80::2c8e:1de0:a862:14fd/64          IPv6 地址</span>
<span class="line">scope link                                  仅在此设备上有效</span>
<span class="line">valid_lft forever                           IPv6 地址的有效使用期限</span>
<span class="line">preferred_lft forever                       IPv6 地址的首选生存期</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Linux 首先会判断，要去的这个地址和我是一个网段的吗，或者和我的一个网卡是同 一网段的吗？只有是一个网段的，它才会发送 ARP 请求，获取 MAC 地址。如果发现不是呢？ Linux 默认的逻辑是，如果这是一个跨网段的调用，它便不会直接将包发送到网络上，而是将包发送到网关。</li><li>如果自行配置 IP 地址不对，例如不小心配到了私有地址，不会查询 MAC 地址，或者与 MAC 地址匹配失败的话，会在对方接受的时候发现不对，接受不成功</li></ul><h4 id="dhcp" tabindex="-1"><a class="header-anchor" href="#dhcp"><span>DHCP</span></a></h4><ul><li>DHCP 协议主要是用来给客户租用 IP 地址，和房产中介很像，要商谈、签约、续租，广播还 不能“抢单”；</li><li>DHCP 协议能给客户推荐“装修队”PXE，能够安装操作系统，这个在云计算领域大有用 处。</li><li>新来的机器使用 IP 地址 0.0.0.0 发送了一个广播包，目的 IP 地址为 255.255.255.255。广播包 封装在 UDP 里面，UDP 封装在 BOOTP 里面。其实 DHCP 是 BOOTP 的增强版，但是如果你 去抓包的话，很可能看到的名称还是 BOOTP 协议。 在这个广播包里面，新人大声喊：我是新来的（Boot request），我的 MAC 地址是这个，我 还没有 IP，谁能给租给我个 IP 地址！，同样的格式广播回去，信息分别为 DHCP Request 广播数据包</li></ul><h2 id="ip-层工作" tabindex="-1"><a class="header-anchor" href="#ip-层工作"><span>IP 层工作</span></a></h2><ul><li>IP 层需要查看目标地址和自己是否在同一个局域网内</li><li>如果是就发送 ARP 查询目标 IP 的 MAC 地址，将源 MAC 和目标 MAC 仿佛 MAC 头发送</li><li>如果不是就发往网关，通过 ARP 获取网关的 MAC 地址，发送</li><li>网关收到包发现 MAC 符合，去除目标 IP，根据路由协议找到下一跳的路由器，获取下一跳路由器的 MAC 地址，发往下一跳路由器</li><li>到达目标局域网，最后一跳路由器发现目标地址在某一个出口的局域网上，发送 ARP 获取目标地址的 MAC 地址发包</li><li>目标地址发现 MAC 地址符合，首保，IP 地址也符合，再解析 TCP 头，查看序列号，</li><li>是就放入缓存中返回一个 ACK 不是就丢弃</li><li>TCP 还有端口号，HTTP 服务器正在监听此端口，目标机器九江这个包发给 HTTP 服务器</li><li>HTTP 服务器进程监听后知道这个骑牛是要访问一个网页，就发往客户端</li></ul><h2 id="构建返回" tabindex="-1"><a class="header-anchor" href="#构建返回"><span>构建返回</span></a></h2><ul><li>构造好了返回的 HTTP 报文，接下来把这个报文发送出去，可选 socket、tcp/udp</li><li>tcp 分段加上 tcp 头交给 IP 层，反向直达客户端</li><li>客户端发现 MAC、IP 地址符合，借给对应 TCP，查看序列号，发送给响应进程浏览器于是开始解析</li></ul><h2 id="路由协议" tabindex="-1"><a class="header-anchor" href="#路由协议"><span>路由协议</span></a></h2><ul><li>路由器是一台网络设备，有多张网卡，根据路由表转发流量</li><li>路由表的规则包括目的网络、出口设备、下一跳网关</li><li>通过 route 或 ip route 命令查询或配置</li><li>ip route add 10.176.48.0/20 via 10.173.32.1 dev eth0++，就说明要去 10.176.48.0/20 这个目标网络，要从 eth0 端口出去，经过 10.173.32.1</li><li>核心配置思想：根据目的 IP 地址来配置路由</li><li>策略路由：根据多个参数配置路由 <ul><li>ip rule add from 192.168.1.0/24 table 10++，表示从 192.168.1.10/24 这个网段来的，使用 table 10 中的路由表</li></ul></li></ul><h2 id="虚拟机" tabindex="-1"><a class="header-anchor" href="#虚拟机"><span>虚拟机</span></a></h2><p>采用物理机来连接一台台机器在采购、运维、规格、复用方面都不灵活</p><p>我们采用虚拟机解决</p><p>虚拟机是一个通过软件模拟硬件的方式构建一台虚拟出来的机器</p><p>数据中心用的 qemu-kvm，会模拟 CPU、内存、网络、硬盘，使得虚拟机感觉自己在使用独立的设备。</p><p>虚拟机轮流使用武力 CPU、内存使用虚拟内存映射</p><p><a href="https://www.ibm.com/developerworks/cn/linux/l-tuntap/index.html" target="_blank" rel="noopener noreferrer">虚拟网卡的原理</a></p><ul><li>虚拟机上的网卡是通过 linux 上<a href="https://segmentfault.com/a/1190000009249039" target="_blank" rel="noopener noreferrer">TUN/TAP</a>技术实现</li></ul><h3 id="tun-tap" tabindex="-1"><a class="header-anchor" href="#tun-tap"><span>TUN/TAP</span></a></h3><ul><li>TUN 与 TAP 是操作系统内核中的虚拟网络设备。不同于普通靠硬件网路板卡实现的设备，这些虚拟的网络设备全部用软件实现，并向运行于操作系统上的软件提供与硬件的网络设备完全相同的功能</li><li>TAP 等同于一个以太网设备，它操作第二层数据包如以太网数据帧。TUN 模拟了网络层设备，操作第三层数据包比如 IP 数据封包。</li><li>可以把 tun/tap 看成数据管道，它一端连接主机协议栈，另一端连接用户程序。</li></ul><h2 id="vlan" tabindex="-1"><a class="header-anchor" href="#vlan"><span>VLAN</span></a></h2><ul><li>采用桥接和 NAC 实现共享和互通，隔离采用 VLAN</li><li>与路由器相比，二层交换机一般带有多个网络接口。因此如果能使用它分割广播域，那么无疑运用上的灵活性会大大提高</li><li>用于在二层交换机上分割广播域的技术，就是<a href="https://zhuanlan.zhihu.com/p/35616289" target="_blank" rel="noopener noreferrer">VLAN</a></li><li>VLAN 通过限制广播帧转发的范围分割了广播域</li><li>如果要更为直观地描述 VLAN 的话，我们可以把它理解为将一台交换机在逻辑上分割成了数台交换机。在一台交换机上生成红、蓝两个 VLAN，也可以看作是将一台交换机换做一红一蓝两台虚拟的交换机</li><li>要对不同用户的网络进行隔离，解决 VLAN 数目有限的问题，需要通过 Overlay 的方式，常 用的有 GRE 和 VXLAN</li><li>GRE 是一种点对点的隧道模式，VXLAN 支持组播的隧道模式，它们都要在某个 Tunnel Endpoint 进行封装和解封装，来实现跨物理机的互通。</li><li><a href="https://draveness.me/docker" target="_blank" rel="noopener noreferrer">Docker 原理</a></li></ul><p><strong>子网划分</strong>：当一组 IP 地址指定给一个公司时，公司可能将该网络“分割成”小的网络，每个部门一个。这样，技术部门和管理部门都可以有属于它们的小网络。通过划分子网，我们可以按照我们的需要将网络分割成小网络。这样也有助于降低流量和隐藏网络的复杂性</p><h2 id="虚拟网卡" tabindex="-1"><a class="header-anchor" href="#虚拟网卡"><span>虚拟网卡</span></a></h2><ul><li>打开 TUN/TAP 的字符设备文件，在虚拟机上虚拟出一张虚拟 TAP 网卡，所有的网络报都前这里发</li><li>把网络包转换成文件流，写入字符设备，就像写一个文件，TAP 驱动收到写入的文件流，交给虚拟网卡驱动，再讲文件流转成网络报交给 TCP/IP，最后冲网卡发出来。</li><li>共享互通：虚拟交换机创建虚拟网桥，将虚拟网卡都连接到虚拟网桥上，将虚拟机配置相同的子网网段即可实现虚拟机之间相互通信。 <ul><li>hostonly：连个虚拟机连到一个虚拟网桥上，只要虚拟机之间相互访问即可</li><li>桥接：将虚拟交换机与虚拟机的虚拟网卡连接，物理网卡也连接到这个虚拟交换机上。 <ul><li>此时虚拟机的 IP 和物理机的网段是一个</li><li>将网络打平了，虚拟机的 IP 由物理网络中的 DHCP 分配</li></ul></li><li>NAT 模式：在桥接模式的基础上在虚拟交换机和物理网卡之间加一个 NAT 设备。再将一个虚拟 DHCP 服务器连接到虚拟交换机上 <ul><li>虚拟机和物理机的 IP 是不同的</li><li>虚拟机要访问物理机时候，要将地址 NAT 成为物理机地址</li><li>内置一个 DHCP 服务器为虚拟机动态分配 IP 地址</li></ul></li></ul></li><li>隔离 <ul><li>vconfig，基于物理网卡创建带 VLAN 的虚拟网卡，所有从这个虚拟网卡发出的包，都带 VLAN，跨物理机的互通和隔离通过此网卡实现</li><li>为每个用户分配不同个 VLAN，为每个用户用 vconfig 穿件一个带 VLAN 的网卡，不同用户使用不同虚拟网桥，带 VLAN 的虚拟网卡也连接到虚拟网桥上</li><li>用 VLAN 隔离有缺陷，可隔离的树木太少 VLANID 只有 4096 个，不够用，而且不够灵活</li></ul></li></ul><h2 id="软件定义网络-sdn" tabindex="-1"><a class="header-anchor" href="#软件定义网络-sdn"><span>软件定义网络 SDN</span></a></h2><ul><li>控制与转发分离：用网络设备如叫混迹转发，又有专门的控制中心</li><li>控制平面与转发平面之间的开放接口，控制器可以被应用层调用（北向接口），向下又可以控制网络设备（南向接口）</li><li>逻辑上的集中控制：逻辑上可以通过控制中心控制整个网络</li><li>通过 OpenFlow 和 OpenvSwitch 实现</li><li>OpenFlow 是 SDN 控制器和网络设备之间互通的南向接口协议</li><li>OpenvSwitch 也称 OVS，它能创建软件的虚拟交换机</li><li>有一个流表规则，任何通过交换机的包，都经过这些规则处理，接受转发放弃。规则从优先级高的看到优先级低的</li></ul><h2 id="rpc" tabindex="-1"><a class="header-anchor" href="#rpc"><span>RPC</span></a></h2><p>是 Remote Procedure Call 的简称，翻译成中文就是远程过程调用</p><ul><li>RPC 是面向过程，Restful 是面向资源，并且使用了 Http 动词。从这个维度上看，Restful 风格的 url 在表述的精简性、可读性上都要更好</li></ul><h2 id="vpc" tabindex="-1"><a class="header-anchor" href="#vpc"><span>VPC</span></a></h2><p>Virtual Private Cloud，虚拟私有云，VPC 即是一种云，也是一种网络模式，不过应该从服务和技术的角度分别来看</p><ul><li>对于基础架构服务（IaaS），云就是指资源池</li><li>VPC 不属于这三种云中任一种。这是一种运行在公有云上，将一部分公有云资源为某个用户隔离出来，给这个用户私有使用的资源的集合</li><li>从提供服务的角度来，说如果 VPC 指的只是网络的话，那它跟 VPN 的概念是重复的。所以，从公有云所提供的服务来说，VPC 应该理解成，向用户提供的隔离资源的集合</li><li>经典网络提供的是多用户共享的网络，而 VPC 提供的是用户专属的网络。</li></ul><h2 id="vxlan" tabindex="-1"><a class="header-anchor" href="#vxlan"><span>VXLAN</span></a></h2><ul><li>VXLAN（Virtual eXtensible Local Area Network 虚拟扩展本地局域网），从名字上就知道，这是一个 VLAN 的扩展协议。</li></ul><p>或许是目前最热门的网络虚拟化技术</p><ul><li>VXLAN 协议将 Ethernet 帧封装在 UDP 内，再加上 8 个字节的 VXLAN header，用来标识不同的二层网络。</li><li>VxLAN 本质上是一种隧道封装技术。它使用 TCP/IP 协议栈的惯用手法——封装/解封装技术，</li><li>VXLAN 与 VLAN 的最大区别在于，VLAN 只是修改了原始的 Ethernet Header，但是整个网络数据包还是原来那个数据包，而 VXLAN 是将原始的 Ethernet Frame 隐藏在 UDP 数据里面。经过 VTEP 封装之后，在网络线路上看起来只有 VTEP 之间的 UDP 数据传递，原始的网络数据包被掩盖了。 <a href="https://www.cnblogs.com/bakari/p/11131268.html" target="_blank" rel="noopener noreferrer">使用的优势</a></li><li>VLAN ID 数量限制</li><li>更好地利用多条网络链路</li><li>TOR 交换机 MAC 地址表限制</li><li>灵活的虚拟机部署和迁移</li></ul><p>GRE/NVGRE（Generic Routing Encapsulation，通用路由协议封装）是一种 IP-over-IP 的隧道</p><h2 id="部署一个高可用的电商平台" tabindex="-1"><a class="header-anchor" href="#部署一个高可用的电商平台"><span>部署一个高可用的电商平台</span></a></h2><p><img src="https://note.youdao.com/yws/public/resource/c9f1b9f836ce443c9e328d9da17c3c84/xmlnote/53F42D3298D741399809B2EF2108E25B/14469" alt="image"></p><ul><li>多处部署公有云</li><li>多个机房，形成多个可用区，假设两个，任意一个挂了不会影响</li><li>每个可用区有一片片机柜上一片片服务器，每个机柜一个计入交换机，一个汇聚交换机将多个机柜连在一起</li><li>服务器上部署计算节点，每台上都有虚拟交换机，连接虚拟机</li><li>在云计算的界面上创建一个 VPC 指定 IP 端，为每个 VPC 分配 VXLAN 的 ID。不同的 VPC 二层不同</li><li>由于有两个可用区，所以在这个 VPC 里面为每个可用区分配子网，配置路由策略</li><li>创建数据库持久化层</li><li>云平台提供的 PaaS 服务会提供数据库服务</li><li>云平台给每个子网的数据库实例分配一个域名，创建数据量实例需要指定可用区可子网，这样创建出来的数据库实例可以通过子网的私网 IP 访问</li><li>在多个数据库上，创建一个分布式数据库实例，也需指定可用区和子网，还需分配死亡 IP 和域名</li><li>创建缓存集群</li><li>部署程序，通过 RPC 相互调用</li><li>通过虚拟机和虚拟机之间的网络通信，同一台物理机用虚拟交换机访问，不同物理机用 VXLAN 隧道转发</li><li>负载均衡部署在虚拟机上，网关节点上有 NAT 转换规则，将外网 IP 转换为 VPC 死亡，通过死亡 IP 访问到虚拟机上的负载均衡节点，在转发到 API 网关节点</li><li>外网和虚拟机网咯之间的互通，是通过虚拟网关转发模块，OVS 将私网 IP 放到 VXLAN 隧道转发到虚拟机</li><li>不同可用区之间通过核心交换机连接，核心交换机之外是边界路由器</li><li>也可通过 VPN 网关将不同地区的不同 V 通过 VPN 连接起来</li><li>云平台提供智能 DNS</li><li>静态资源可以保存到对象存储，通过 CDN 下发到边缘节点</li><li>外网 IP 放在虚拟网关的外网网口，通过 BGP 路由协议让全世界知道,访问外网 IP 的服务器在这里</li><li>核心交换外面是安全设备再是边界路由器和多个运营商连接，从而每个运营商都能访问这个网站，边界路由器可以通过 BGP 洗衣将外网 IP 广播</li><li>每个运营商也有很多路由器，很多节点，于是就可以将如何到达这些 IP 地址的路由信息广播到全世界</li></ul><h2 id="查看" tabindex="-1"><a class="header-anchor" href="#查看"><span>查看</span></a></h2><ul><li>静态资源保存，都会配置 CDN 下发到边远节点，为静态资源配置一个 CNAME 别名，指向另一个域名返回给本地 DNS，又解析这个域名，指向 CDN 全局负载均衡奇，会为用户选择一台合适的缓存服务器返回 IP，响应返回 <ul><li>nginx 后面的 varnish 缓存，静态页面</li><li>较大的不常更新的图片，在对象缓存</li></ul></li></ul><h2 id="p2p-协议" tabindex="-1"><a class="header-anchor" href="#p2p-协议"><span>P2P 协议</span></a></h2><p>P2P 就是 peer-to-peer。资源开始并不集中地 存储在某些设备上，而是分散地存储在多台设备上。这些设备我们姑且称为 peer</p><p>想要下载一个文件的时候，你只要得到那些已经存在了文件的 peer，并和这些 peer 之间，建 立点对点的连接，而不需要到中心服务器上，就可以就近下载文件。一旦下载了文件，你也就成 为 peer 中的一员，你旁边的那些机器，也可能会选择从你这里下载文件，所以当你使用 P2P 软件的时候，例如 BitTorrent，往往能够看到，既有下载流量，也有上传的流量，也即你自己 也加入了这个 P2P 的网络，自己从别人那里下载，同时也提供给其他人下载。</p><p>种子（.torrent）文件</p><p>.torrent 文件由两部分组成，分别：announce（tracker URL）和文件信息。</p><p>下载时，BT 客户端首先解析.torrent 文件，得到 tracker 地址，然后连接 tracker 服务器。 tracker 服务器回应下载者的请求，将其他下载者（包括发布者）的 IP 提供给下载者。下载者 再连接其他下载者，根据.torrent 文件，两者分别对方告知自己已经有的块，然后交换对方没有 的数据。</p><p>DHT（Distributed Hash Table）的去中心化网络</p><p>每个加入这个 DHT 网络的人，都要负责存储这个网络里的资源信息和其他成员的联系信息，相当于所有人一 起构成了一个庞大的分布式存储数据库</p><h2 id="虚拟机网络配置" tabindex="-1"><a class="header-anchor" href="#虚拟机网络配置"><span><a href="http://www.aidansu.com/2017/docker-cluster-network-planning/" target="_blank" rel="noopener noreferrer">虚拟机网络配置</a></span></a></h2></div><!--[--><!--]--></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link label" href="https://github.com/liujia6/liujia6.github.io/edit/main/网络/网络基础.md" aria-label="帮助我们改善此页面！" rel="noopener noreferrer" target="_blank"><!--[--><svg class="edit-icon" viewbox="0 0 1024 1024"><g fill="currentColor"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></g></svg><!--]-->帮助我们改善此页面！<!----></a></div><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: liujia11@qianxin.com">liujia6</span><!----><!--]--><!--]--></span></div></div></footer><nav class="vp-page-nav" aria-label="page navigation"><a class="route-link auto-link prev" href="/%E7%BD%91%E7%BB%9C/HTTP%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97.html" aria-label="/%E7%BD%91%E7%BB%9C/HTTP%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97.html"><div class="hint"><span class="arrow left"></span> Prev</div><div class="link"><span>/%E7%BD%91%E7%BB%9C/HTTP%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97.html</span></div></a><a class="route-link auto-link next" href="/%E7%BD%91%E7%BB%9C/grpc.html" aria-label="grpc"><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span>grpc</span></div></a></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-BYS36vur.js" defer></script>
  </body>
</html>
