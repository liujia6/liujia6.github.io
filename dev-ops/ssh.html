<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.13" />
    <style>
      :root {
        --c-bg: #fff;
      }

      html.dark {
        --c-bg: #22272e;
      }

      html,
      body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia('(prefers-color-scheme: dark)').matches
      if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
        document.documentElement.classList.toggle('dark', true)
      }
    </script>
    <link rel="icon" href="/favicon.ico"><title>ssh | 游离 の Blog</title><meta name="description" content="">
    <link rel="preload" href="/assets/style-DADYFlon.css" as="style"><link rel="stylesheet" href="/assets/style-DADYFlon.css">
    <link rel="modulepreload" href="/assets/app-BYS36vur.js"><link rel="modulepreload" href="/assets/ssh.html-D-umq8DH.js">
    <link rel="prefetch" href="/assets/index.html-C0vaV-Q8.js" as="script"><link rel="prefetch" href="/assets/Error.html-DGtk3Zv3.js" as="script"><link rel="prefetch" href="/assets/RXJS.html-CVbdZQUj.js" as="script"><link rel="prefetch" href="/assets/ts.html-DrUlVPgb.js" as="script"><link rel="prefetch" href="/assets/二进制.html-C-i_W_Ax.js" as="script"><link rel="prefetch" href="/assets/基础.html-DTZlmurQ.js" as="script"><link rel="prefetch" href="/assets/异步.html-CXoWjvEq.js" as="script"><link rel="prefetch" href="/assets/手写代码系列.html-DYyN_QPd.js" as="script"><link rel="prefetch" href="/assets/类型转换.html-d83awUSN.js" as="script"><link rel="prefetch" href="/assets/错误处理.html-C2Z6_gWS.js" as="script"><link rel="prefetch" href="/assets/Vuejs设计与实现.html-Dy0lDYCV.js" as="script"><link rel="prefetch" href="/assets/keep-alive.html-o2fFztot.js" as="script"><link rel="prefetch" href="/assets/key值.html-BJMIzNDi.js" as="script"><link rel="prefetch" href="/assets/vue2响应式原理.html-DfUKepU3.js" as="script"><link rel="prefetch" href="/assets/vue3新特性.html-B0UmK71G.js" as="script"><link rel="prefetch" href="/assets/vue使用总结.html-B67x6YND.js" as="script"><link rel="prefetch" href="/assets/vue命名方式.html-BeoAZz0b.js" as="script"><link rel="prefetch" href="/assets/ansible.html-g5jUWaJo.js" as="script"><link rel="prefetch" href="/assets/bash.html-CUdr2QiO.js" as="script"><link rel="prefetch" href="/assets/docker.html-BiZAo7Vb.js" as="script"><link rel="prefetch" href="/assets/gitlab-ci.html-BT1X7389.js" as="script"><link rel="prefetch" href="/assets/linux.html-DnVqCRUo.js" as="script"><link rel="prefetch" href="/assets/nginx.html-ZJgrTcee.js" as="script"><link rel="prefetch" href="/assets/CSS.html-DuUhO882.js" as="script"><link rel="prefetch" href="/assets/less_postcss.html-CpBPZYic.js" as="script"><link rel="prefetch" href="/assets/index.html-Bfu7LHWp.js" as="script"><link rel="prefetch" href="/assets/babel.html-xjItmTE0.js" as="script"><link rel="prefetch" href="/assets/git.html-BIrvJEk8.js" as="script"><link rel="prefetch" href="/assets/package.json.html-uzA7lmne.js" as="script"><link rel="prefetch" href="/assets/webpack.html-w6lxpkra.js" as="script"><link rel="prefetch" href="/assets/代码风格统一指南.html-DIYzqUog.js" as="script"><link rel="prefetch" href="/assets/模块化.html-CS9vE-BC.js" as="script"><link rel="prefetch" href="/assets/测试.html-DnuACrVv.js" as="script"><link rel="prefetch" href="/assets/OAuth2与微信登陆.html-BngLLKud.js" as="script"><link rel="prefetch" href="/assets/index.html-CPhXWsnK.js" as="script"><link rel="prefetch" href="/assets/微前端.html-Bm_Caomy.js" as="script"><link rel="prefetch" href="/assets/移动端适配.html-eP-Tt_qx.js" as="script"><link rel="prefetch" href="/assets/页面渲染探索和演进.html-VlyjKBV4.js" as="script"><link rel="prefetch" href="/assets/index.html-DkLNw5m9.js" as="script"><link rel="prefetch" href="/assets/a-life-of-a-pixel浏览器渲染.html-C1yQA908.js" as="script"><link rel="prefetch" href="/assets/layoutNG.html-CYgKIr5m.js" as="script"><link rel="prefetch" href="/assets/变化.html-DyUvd37t.js" as="script"><link rel="prefetch" href="/assets/浏览器架构.html-Bq4XR2w-.js" as="script"><link rel="prefetch" href="/assets/index.html-BYKO3Qh5.js" as="script"><link rel="prefetch" href="/assets/买卖股票.html-DYs8rL2X.js" as="script"><link rel="prefetch" href="/assets/二叉树.html-g4bDRvh5.js" as="script"><link rel="prefetch" href="/assets/其他构造类.html-ByBkbgg2.js" as="script"><link rel="prefetch" href="/assets/动态规划.html-DVc5fa60.js" as="script"><link rel="prefetch" href="/assets/十大排序.html-tlHWKIUm.js" as="script"><link rel="prefetch" href="/assets/双指针.html-BcNoNGcd.js" as="script"><link rel="prefetch" href="/assets/回溯.html-Cql3Rnbk.js" as="script"><link rel="prefetch" href="/assets/子串子序列系列.html-CA__4NJH.js" as="script"><link rel="prefetch" href="/assets/字符串.html-yrEGjRxz.js" as="script"><link rel="prefetch" href="/assets/排序相关.html-DKxakirD.js" as="script"><link rel="prefetch" href="/assets/数学.html-C7a3Xyu_.js" as="script"><link rel="prefetch" href="/assets/数组.html-BGcEXTkB.js" as="script"><link rel="prefetch" href="/assets/栈.html-RlJlyWup.js" as="script"><link rel="prefetch" href="/assets/背包.html-BpBkXWLX.js" as="script"><link rel="prefetch" href="/assets/链表.html-diPpfGxH.js" as="script"><link rel="prefetch" href="/assets/airbnb.html-Bj8kHMcG.js" as="script"><link rel="prefetch" href="/assets/plantuml.html-GuAU9e4n.js" as="script"><link rel="prefetch" href="/assets/函数式编程.html-C191Ha5X.js" as="script"><link rel="prefetch" href="/assets/架构整洁之道.html-6o2FOIRj.js" as="script"><link rel="prefetch" href="/assets/状态机.html-DnbSirk7.js" as="script"><link rel="prefetch" href="/assets/设计模式.html-BCVHmWuv.js" as="script"><link rel="prefetch" href="/assets/重构.html-DSK9uFIi.js" as="script"><link rel="prefetch" href="/assets/HTTP.html-BU-_wIYK.js" as="script"><link rel="prefetch" href="/assets/HTTP权威指南.html-CUVgiYBj.js" as="script"><link rel="prefetch" href="/assets/TCP-UDP.html-B8J0jf_y.js" as="script"><link rel="prefetch" href="/assets/grpc.html-VKbS4PfI.js" as="script"><link rel="prefetch" href="/assets/web状态存储.html-DfKQvwKu.js" as="script"><link rel="prefetch" href="/assets/网络基础.html-CDGeHHAD.js" as="script"><link rel="prefetch" href="/assets/web安全.html-C51FNuy6.js" as="script"><link rel="prefetch" href="/assets/UDP.html-Bmoo1LX-.js" as="script"><link rel="prefetch" href="/assets/404.html-qO4hmvmC.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon"><!--[--><header class="vp-navbar"><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/"><!----><span class="vp-site-name" aria-hidden="true">游离 の Blog</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/liujia6/liujia6.github.io" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!---->GitHub<!----></a></div><!--]--></nav><!--[--><!--]--><button class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar"><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/liujia6/liujia6.github.io" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!---->GitHub<!----></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading"> <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/JS/%E5%9F%BA%E7%A1%80.html" aria-label="基础"><!---->基础<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/JS/%E5%BC%82%E6%AD%A5.html" aria-label="异步"><!---->异步<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/JS/Error.html" aria-label="/JS/Error.html"><!---->/JS/Error.html<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/JS/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86.html" aria-label="错误处理的应用"><!---->错误处理的应用<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/JS/%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2.html" aria-label="JS 类型与转换"><!---->JS 类型与转换<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/JS/%E6%89%8B%E5%86%99%E4%BB%A3%E7%A0%81%E7%B3%BB%E5%88%97.html" aria-label="手写代码"><!---->手写代码<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/JS/ts.html" aria-label="/JS/ts.html"><!---->/JS/ts.html<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/JS/RXJS.html" aria-label="RXJS"><!---->RXJS<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading active"> <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link route-link-active auto-link vp-sidebar-item active" href="/dev-ops/ssh.html" aria-label="ssh"><!---->ssh<!----></a><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="#远程登录" aria-label="远程登录"><!---->远程登录<!----></a><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="#ssh-配置公钥免密登录实战" aria-label="ssh 配置公钥免密登录实战"><!---->ssh 配置公钥免密登录实战<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="#远程登录的原理" aria-label="远程登录的原理"><!---->远程登录的原理<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item" href="#管理本机的多个-ssh-密钥-多个远程仓库账号" aria-label="管理本机的多个 ssh 密钥（多个远程仓库账号）"><!---->管理本机的多个 ssh 密钥（多个远程仓库账号）<!----></a><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="#ssh-agent" aria-label="ssh-agent"><!---->ssh-agent<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="#config" aria-label="config"><!---->config<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="#配置-ssh-agent-登录" aria-label="配置 ssh-agent 登录"><!---->配置 ssh-agent 登录<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item" href="#远程执行命令" aria-label="远程执行命令"><!---->远程执行命令<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="#远程服务当本地用" aria-label="远程服务当本地用"><!---->远程服务当本地用<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="#代理" aria-label="代理"><!---->代理<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item" href="/dev-ops/linux.html" aria-label="linux 总结"><!---->linux 总结<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/dev-ops/nginx.html" aria-label="nginx"><!---->nginx<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/dev-ops/gitlab-ci.html" aria-label="/dev-ops/gitlab-ci.html"><!---->/dev-ops/gitlab-ci.html<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/dev-ops/ansible.html" aria-label="ansible"><!---->ansible<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/dev-ops/docker.html" aria-label="/dev-ops/docker.html"><!---->/dev-ops/docker.html<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading"> <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/Vue/vue2%E5%93%8D%E5%BA%94%E5%BC%8F%E5%8E%9F%E7%90%86.html" aria-label="Vue 响应式原理"><!---->Vue 响应式原理<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/Vue/vue3%E6%96%B0%E7%89%B9%E6%80%A7.html" aria-label="vue3新特性"><!---->vue3新特性<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/Vue/key%E5%80%BC.html" aria-label="vue 中 key 值的作用"><!---->vue 中 key 值的作用<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/Vue/vue%E5%91%BD%E5%90%8D%E6%96%B9%E5%BC%8F.html" aria-label="vue 命名规范"><!---->vue 命名规范<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/Vue/vue%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93.html" aria-label="vue 使用总结"><!---->vue 使用总结<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/Vue/Vuejs%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0.html" aria-label="/Vue/Vuejs%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0.html"><!---->/Vue/Vuejs%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0.html<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/Vue/keep-alive.html" aria-label="keep-alive 缓存"><!---->keep-alive 缓存<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading"> <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/%E5%B7%A5%E7%A8%8B%E5%8C%96/git.html" aria-label="git"><!---->git<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E5%B7%A5%E7%A8%8B%E5%8C%96/package.json.html" aria-label="package.json"><!---->package.json<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E5%B7%A5%E7%A8%8B%E5%8C%96/%E4%BB%A3%E7%A0%81%E9%A3%8E%E6%A0%BC%E7%BB%9F%E4%B8%80%E6%8C%87%E5%8D%97.html" aria-label="代码风格统一指南"><!---->代码风格统一指南<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E5%B7%A5%E7%A8%8B%E5%8C%96/babel.html" aria-label="/%E5%B7%A5%E7%A8%8B%E5%8C%96/babel.html"><!---->/%E5%B7%A5%E7%A8%8B%E5%8C%96/babel.html<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E5%B7%A5%E7%A8%8B%E5%8C%96/webpack.html" aria-label="webpack"><!---->webpack<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E5%B7%A5%E7%A8%8B%E5%8C%96/%E6%A8%A1%E5%9D%97%E5%8C%96.html" aria-label="模块化"><!---->模块化<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E5%B7%A5%E7%A8%8B%E5%8C%96/%E6%B5%8B%E8%AF%95.html" aria-label="/%E5%B7%A5%E7%A8%8B%E5%8C%96/%E6%B5%8B%E8%AF%95.html"><!---->/%E5%B7%A5%E7%A8%8B%E5%8C%96/%E6%B5%8B%E8%AF%95.html<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading"> <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%AE%97%E6%B3%95/%E5%8D%81%E5%A4%A7%E6%8E%92%E5%BA%8F.html" aria-label="/%E7%AE%97%E6%B3%95/%E5%8D%81%E5%A4%A7%E6%8E%92%E5%BA%8F.html"><!---->/%E7%AE%97%E6%B3%95/%E5%8D%81%E5%A4%A7%E6%8E%92%E5%BA%8F.html<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%9B%B8%E5%85%B3.html" aria-label="/%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%9B%B8%E5%85%B3.html"><!---->/%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%9B%B8%E5%85%B3.html<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%AE%97%E6%B3%95/%E6%95%B0%E5%AD%A6.html" aria-label="/%E7%AE%97%E6%B3%95/%E6%95%B0%E5%AD%A6.html"><!---->/%E7%AE%97%E6%B3%95/%E6%95%B0%E5%AD%A6.html<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%AE%97%E6%B3%95/%E6%95%B0%E7%BB%84.html" aria-label="/%E7%AE%97%E6%B3%95/%E6%95%B0%E7%BB%84.html"><!---->/%E7%AE%97%E6%B3%95/%E6%95%B0%E7%BB%84.html<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%AE%97%E6%B3%95/%E9%93%BE%E8%A1%A8.html" aria-label="链表"><!---->链表<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%AE%97%E6%B3%95/%E6%A0%88.html" aria-label="/%E7%AE%97%E6%B3%95/%E6%A0%88.html"><!---->/%E7%AE%97%E6%B3%95/%E6%A0%88.html<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%AE%97%E6%B3%95/%E5%AD%97%E7%AC%A6%E4%B8%B2.html" aria-label="/%E7%AE%97%E6%B3%95/%E5%AD%97%E7%AC%A6%E4%B8%B2.html"><!---->/%E7%AE%97%E6%B3%95/%E5%AD%97%E7%AC%A6%E4%B8%B2.html<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%AE%97%E6%B3%95/%E5%AD%90%E4%B8%B2%E5%AD%90%E5%BA%8F%E5%88%97%E7%B3%BB%E5%88%97.html" aria-label="/%E7%AE%97%E6%B3%95/%E5%AD%90%E4%B8%B2%E5%AD%90%E5%BA%8F%E5%88%97%E7%B3%BB%E5%88%97.html"><!---->/%E7%AE%97%E6%B3%95/%E5%AD%90%E4%B8%B2%E5%AD%90%E5%BA%8F%E5%88%97%E7%B3%BB%E5%88%97.html<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%AE%97%E6%B3%95/%E4%BA%8C%E5%8F%89%E6%A0%91.html" aria-label="二叉树"><!---->二叉树<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%AE%97%E6%B3%95/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92.html" aria-label="动态规划"><!---->动态规划<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%AE%97%E6%B3%95/%E5%85%B6%E4%BB%96%E6%9E%84%E9%80%A0%E7%B1%BB.html" aria-label="其他构造类"><!---->其他构造类<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%AE%97%E6%B3%95/%E8%83%8C%E5%8C%85.html" aria-label="背包"><!---->背包<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%AE%97%E6%B3%95/%E4%B9%B0%E5%8D%96%E8%82%A1%E7%A5%A8.html" aria-label="/%E7%AE%97%E6%B3%95/%E4%B9%B0%E5%8D%96%E8%82%A1%E7%A5%A8.html"><!---->/%E7%AE%97%E6%B3%95/%E4%B9%B0%E5%8D%96%E8%82%A1%E7%A5%A8.html<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading"> <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%BD%91%E7%BB%9C/HTTP.html" aria-label="HTTP"><!---->HTTP<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%BD%91%E7%BB%9C/HTTP%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97.html" aria-label="/%E7%BD%91%E7%BB%9C/HTTP%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97.html"><!---->/%E7%BD%91%E7%BB%9C/HTTP%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97.html<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80.html" aria-label="/%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80.html"><!---->/%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80.html<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%BD%91%E7%BB%9C/grpc.html" aria-label="grpc"><!---->grpc<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading"> <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/web%E5%AE%89%E5%85%A8.html" aria-label="web 安全"><!---->web 安全<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading"> <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%BC%96%E7%A8%8B/%E9%87%8D%E6%9E%84.html" aria-label="重构"><!---->重构<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%BC%96%E7%A8%8B/%E6%9E%B6%E6%9E%84%E6%95%B4%E6%B4%81%E4%B9%8B%E9%81%93.html" aria-label="架构整洁之道"><!---->架构整洁之道<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%BC%96%E7%A8%8B/%E7%8A%B6%E6%80%81%E6%9C%BA.html" aria-label="状态机"><!---->状态机<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%BC%96%E7%A8%8B/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html" aria-label="设计模式"><!---->设计模式<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%BC%96%E7%A8%8B/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html" aria-label="函数式编程"><!---->函数式编程<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%BC%96%E7%A8%8B/plantuml.html" aria-label="plantuml"><!---->plantuml<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%BC%96%E7%A8%8B/airbnb.html" aria-label="AirBNB"><!---->AirBNB<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading"> <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/%E6%96%B0%E6%8A%80%E6%9C%AF/%E5%BE%AE%E5%89%8D%E7%AB%AF.html" aria-label="如何管理日益庞大的项目"><!---->如何管理日益庞大的项目<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E6%96%B0%E6%8A%80%E6%9C%AF/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%80%82%E9%85%8D.html" aria-label="/%E6%96%B0%E6%8A%80%E6%9C%AF/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%80%82%E9%85%8D.html"><!---->/%E6%96%B0%E6%8A%80%E6%9C%AF/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%80%82%E9%85%8D.html<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/新技术/OAuth2.0与微信登陆.html" aria-label="/新技术/OAuth2.0与微信登陆.html"><!---->/新技术/OAuth2.0与微信登陆.html<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E6%96%B0%E6%8A%80%E6%9C%AF/%E9%A1%B5%E9%9D%A2%E6%B8%B2%E6%9F%93%E6%8E%A2%E7%B4%A2%E5%92%8C%E6%BC%94%E8%BF%9B.html" aria-label="页面渲染探索和演进"><!---->页面渲染探索和演进<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading"> <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/浏览器/README.html" aria-label="/浏览器/README.html"><!---->/浏览器/README.html<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E6%B5%8F%E8%A7%88%E5%99%A8/%E6%B5%8F%E8%A7%88%E5%99%A8%E6%9E%B6%E6%9E%84.html" aria-label="浏览器架构"><!---->浏览器架构<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E6%B5%8F%E8%A7%88%E5%99%A8/a-life-of-a-pixel%E6%B5%8F%E8%A7%88%E5%99%A8%E6%B8%B2%E6%9F%93.html" aria-label="A life of a pixel"><!---->A life of a pixel<!----></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="ssh" tabindex="-1"><a class="header-anchor" href="#ssh"><span>ssh</span></a></h1><ul><li><a href="https://www.ruanyifeng.com/blog/2011/12/ssh_remote_login.html" target="_blank" rel="noopener noreferrer">SSH 原理与运用（一）：远程登录</a></li><li><a href="https://www.ruanyifeng.com/blog/2011/12/ssh_port_forwarding.html" target="_blank" rel="noopener noreferrer">SSH 原理与运用（二）：远程操作与端口转发</a></li></ul><h2 id="远程登录" tabindex="-1"><a class="header-anchor" href="#远程登录"><span>远程登录</span></a></h2><h3 id="ssh-配置公钥免密登录实战" tabindex="-1"><a class="header-anchor" href="#ssh-配置公钥免密登录实战"><span><a href="https://www.ruanyifeng.com/blog/2011/12/ssh_remote_login.html" target="_blank" rel="noopener noreferrer">ssh 配置公钥免密登录实战</a></span></a></h3><ol><li><p>生成 ssh 秘钥 <code>ssh-keygen -t rsa -C &quot;xxx@email.com&quot;</code>,</p></li><li><p>控制台问如果之前有生成过一次 ssh 地址，则需要输入本次的文件名例如 id_rsa_github，不然会覆盖之前的</p></li><li><p>执行 <code>vi ~/.ssh/config</code> 按照以下格式写入主机的简称 ，之后可以用 ssh ${hostNickName} 而不是ssh ${username}@${hostIp}登录了</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">Host ${hostNickName}</span>
<span class="line">  HostName ${hostIp}</span>
<span class="line">  User ${username}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>windows 下执行<code>ssh-copy-id -i ~/.ssh/id_rsa.pub 服务器用户名@服务器地址</code></p><ul><li>本地 Mac 环境执行<code>ssh 服务器用户名@服务器地址 &quot;echo \&quot;</code>cat .ssh/id_rsa.pub<code>\&quot; &gt;&gt; .ssh/authorized_keys&quot;</code></li><li>ssh-copy-id 是用来将本地公钥拷贝到远程的 authorized_keys 文件的脚本命令，它还会将身份标识文件追加到远程机器的 ~/.ssh/authorized_keys 文件中，并给远程主机的用户主目录适当的的权限。</li></ul></li><li><p>以上执行完成后会让输入密码</p></li><li><p>完成啦！输入 ssh 225 即可登录服务器了！(这里 225 是我第一步配置的服务器 HOST 登录简称)</p></li><li><p>~/.ssh 下一共有 4 个文件，<code>config id_rsa id_rsa.pub known_hosts</code>，分别是配置文件，用于简单登录服务器，私钥和公钥，</p></li><li><p>第一次登录主机的时候会提示你<code>Are you sure you want to continue connecting (yes/no)? yes</code>,yes 完成后会将远程主机的公钥存放在此处</p></li></ol><h3 id="远程登录的原理" tabindex="-1"><a class="header-anchor" href="#远程登录的原理"><span>远程登录的原理</span></a></h3><p><strong>账号密码登录</strong>：保证主机提供的密码和账户名一致即可</p><ol><li>如何保证密码不被篡改 <ol><li>使用服务器的公钥将密码加密并使用私钥解密，如果一致则表示密码没有被篡改</li></ol></li><li>服务器的公钥没有证书中心 CA 公证，如何保证服务器的身份不被远程拦截（中间人攻击）， <ol><li>第一次登录时，系统提示并展示出服务器的公钥指纹，并要求确认，此时我们通过对比服务器公示出来的公钥指纹，确认核对即可</li><li>核对后，会将主机的公钥保存在.ssh/known_hosts 文件中，下次就可以不用核对了</li></ol></li></ol><p><strong>ssh 配置公钥免密码登录</strong>：通过预先将本机生成的用户公钥保存在远程主机上，登录时验证通信时本机是否有对应的私钥即可</p><ol><li>如何验证对方是否有是否有对应私钥呢 <ol><li>登录时，服务器发送一个随机字符</li><li>主机用私钥将随机字符加密</li><li>发送给服务器时，服务器用预先存储的用户公钥解密如果确认是否和发送时一致即可确认用户身份</li></ol></li><li>用户公钥存储 <ol><li>远程主机将用户的公钥，保存在登录后的用户主目录的$HOME/.ssh/authorized_keys 文件中。公钥就是一段字符串，只要把它追加在 authorized_keys 文件的末尾就行了</li></ol></li></ol><h2 id="管理本机的多个-ssh-密钥-多个远程仓库账号" tabindex="-1"><a class="header-anchor" href="#管理本机的多个-ssh-密钥-多个远程仓库账号"><span><a href="https://blog.csdn.net/agonie201218/article/details/89561961" target="_blank" rel="noopener noreferrer">管理本机的多个 ssh 密钥</a>（多个远程仓库账号）</span></a></h2><p>可以使用 ssh-agent 统一对私钥代理，也可以通过 config 文件，固定不同域名使用不同私钥</p><p>当切换到其他电脑时，直接复制 ssh 文件夹，并且执行</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">chmod 600 ~/.ssh/config</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="ssh-agent" tabindex="-1"><a class="header-anchor" href="#ssh-agent"><span>ssh-agent</span></a></h3><ul><li>使用场景： <ul><li>本机有多个用户需要登录不同的应用，例如公司的 gitlab 和 github 需要管理两个不一样的 ssh 密钥对，并在 clone 的时候切换用户，因为 ssh 默认使用的是 id_rsa 私钥，如果是需要切换到其他的可以用轻松切换 ssh-agent</li><li>当私钥设置了密码，我们又需要频繁的使用私钥进行认证时，ssh 代理可以帮助我们免去重复的输入密码的操作。</li></ul></li><li>使用 <ul><li><code>eval $(ssh-agent)</code><ul><li>开启 ssh-agent，输出进程 pid<code>Agent pid 1434</code></li><li><code>ssh-agent -k</code> 终止 ssh-agent 运行</li><li>eval <code>ssh-agent</code> 和 ssh-agent $shell 都是同样的运行 ssh-agent 命令</li></ul></li><li><code>ssh-add 私钥路径</code></li><li>AddKeysToAgent -&gt;ssh config 文件配置 <ul><li>是否自动将 key 加入到 <code>ssh-agent</code>，值可以为 no(default)/confirm/ask/yes。</li><li>如果是 yes，key 和密码都将读取文件并以加入到 agent ，就像 <code>ssh-add</code>。其他分别是询问、确认、不加入的意思。添加到 ssh-agent 意味着将私钥和密码交给它管理，让它来进行身份认证。</li></ul></li></ul></li><li>ssh-adds 使用 <ul><li><code>ssh-add -D</code> 删除所有私钥</li><li><code>ssh-add -l</code> 显示所有私钥列表</li><li><code>ssh-add -L</code> 查看代理中的私钥对应的公钥</li><li><code>ssh-add -d /path/of/key/key_name</code> 移除指定的私钥</li><li><code>ssh-add -x</code> 锁定 ssh 代理,锁定时需要指定锁定密码，锁定后的 ssh 代理暂时不能帮助我们管理私钥</li><li><code>ssh-add -X</code> 解锁 ssh 代理</li><li><code>ssh-add -d /path/of/key/key_name</code> 移除指定的私钥</li></ul></li></ul><h3 id="config" tabindex="-1"><a class="header-anchor" href="#config"><span>config</span></a></h3><p>ssh 程序可以从三个途径获取配置参数：</p><ul><li>命令行选型，比如 -i ~/.ssh/id_rsa，-p 6004，-l jingwei；</li><li>用户配置文件，放置在 ~/.ssh/config；</li><li>系统配置文件，放置在 /etc/ssh/ssh_config（区别于 /etc/ssh/sshd_config）。</li></ul><p><a href="https://www.hi-linux.com/posts/14346.html" target="_blank" rel="noopener noreferrer">参考-&gt;利用 SSH 的用户配置文件 Config 管理 SSH 会话</a></p><p><a href="https://deepzz.com/post/how-to-setup-ssh-config.html" target="_blank" rel="noopener noreferrer">参考-&gt;SSH Config 那些你所知道和不知道的事</a></p><p>配置不同的仓库指向不同的密钥文件，为不同网站应用各自的 SSH KEY</p><p>vi ~/.ssh/config</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">Host github.com<span class="token punctuation">(</span>可更改<span class="token punctuation">)</span>// 主机名字，不能重名</span>
<span class="line">    HostName github.com// 主机所在域名或IP</span>
<span class="line">    User <span class="token function">git</span>  // 用户名称</span>
<span class="line">    PreferredAuthentications publickey</span>
<span class="line">    IdentityFile ~/.ssh/id_rsa_github  私钥路径</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>SSH 客户端的 StrictHostKeyChecking 配置指令，<code>StrictHostKeyChecking=no</code>时可以实现当第一次连接服务器时自动接受新的公钥。不再有任何警告出现了。</li><li><strong>LocalForward</strong> 指定本地主机的端口通过 ssh 转发到指定远程主机。格式：LocalForward [bind_address:]post host:hostport，支持 IPv6。</li><li>取消 git 全局用户名/邮箱的设置，设置独立的 用户名/邮箱</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># 取消全局 用户名/邮箱 配置</span></span>
<span class="line">$ <span class="token function">git</span> config <span class="token parameter variable">--global</span> <span class="token parameter variable">--unset</span> user.name</span>
<span class="line">$ <span class="token function">git</span> config <span class="token parameter variable">--global</span> <span class="token parameter variable">--unset</span> user.email</span>
<span class="line"><span class="token comment"># 进入项目文件夹，单独设置每个repo 用户名/邮箱</span></span>
<span class="line">$ <span class="token function">git</span> config user.email <span class="token string">&quot;xxxx@xx.com&quot;</span></span>
<span class="line">$ <span class="token function">git</span> config user.name <span class="token string">&quot;xxxx&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="配置-ssh-agent-登录" tabindex="-1"><a class="header-anchor" href="#配置-ssh-agent-登录"><span><a href="https://zhuanlan.zhihu.com/p/126117538" target="_blank" rel="noopener noreferrer">配置 ssh-agent 登录</a></span></a></h3><p>。/俄xxxxxxxxxxxxxxxxxxxxxxxxxx40-<a href="https://www.zsythink.net/archives/2422" target="_blank" rel="noopener noreferrer">ssh-agent 代理转发原理参考</a></p><p><a href="https://blog.csdn.net/miss1181248983/article/details/84555264?utm_medium=distribute.pc_relevant.none-task-blog-title-7&amp;spm=1001.2101.3001.4242" target="_blank" rel="noopener noreferrer">使用参考</a></p><p>现在有 server1、server2、server3 三台机器，其中 server1 已经可以免秘钥登陆 server2 和 server3，但 server2 和 server3 之间无法通过 ssh 登陆。通过 server1 的 ssh-agent 配置可以实现 server 免秘钥登录 server3</p><p>步骤如下</p><ul><li>编辑配置文件：</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token punctuation">[</span>root@server1 ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/ssh/sshd_config         #做下面更改</span></span>
<span class="line">AllowAgentForwarding <span class="token function">yes</span>   <span class="token comment"># 表示允许代理转发</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>启动 ssh-agent 服务：</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token punctuation">[</span>root@server2 ~<span class="token punctuation">]</span><span class="token comment"># ssh-agent bash</span></span>
<span class="line"></span>
<span class="line"><span class="token punctuation">[</span>root@server1 ~<span class="token punctuation">]</span><span class="token comment"># ps aux |grep ssh-agent</span></span>
<span class="line">root     <span class="token number">24338</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>  <span class="token number">51416</span>   <span class="token number">580</span> ?        Ss   02:43   <span class="token number">0</span>:00 ssh-agent</span>
<span class="line">root     <span class="token number">24388</span>  <span class="token number">0.0</span>  <span class="token number">0.0</span>  <span class="token number">51416</span>  <span class="token number">1032</span> ?        Ss   02:44   <span class="token number">0</span>:00 ssh-agent <span class="token function">bash</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>添加私钥：</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token punctuation">[</span>root@server1 ~<span class="token punctuation">]</span><span class="token comment"># ssh-add ~/.ssh/id_rsa</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>测试登陆：</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token punctuation">[</span>root@server1 ~<span class="token punctuation">]</span><span class="token comment"># ssh -A server2          #这里 -A 不可省略，表示开启认证代理连接转发功能</span></span>
<span class="line">Last login: Mon Nov <span class="token number">26</span> 09:36:58 <span class="token number">2018</span> from server1</span>
<span class="line"></span>
<span class="line"><span class="token punctuation">[</span>root@server2 ~<span class="token punctuation">]</span><span class="token comment"># ssh  server3            #后面这里 -A可以省略</span></span>
<span class="line">Last login: Mon Nov <span class="token number">26</span> 09:37:28 <span class="token number">2018</span> from server1</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-ssh -A server2 #这里 -A 不可省略，表示开启认证代理连接转发功能</p><h2 id="远程执行命令" tabindex="-1"><a class="header-anchor" href="#远程执行命令"><span>远程执行命令</span></a></h2><ul><li><code>ssh server &quot;cd /; ls&quot;</code></li><li><code>$ ssh example &lt; test.sh</code> 远程执行本地脚本</li><li><code>ssh -t example &quot;top&quot;</code> 执行需要交互的命令</li></ul><h2 id="远程服务当本地用" tabindex="-1"><a class="header-anchor" href="#远程服务当本地用"><span>远程服务当本地用</span></a></h2><p>通过 LocalForward 将本地端口上的数据流量通过 ssh 转发到远程主机的指定端口。感觉你是使用的本地服务，其实你使用的远程服务。如远程服务器上运行着 Postgres，端口 5432（未暴露端口给外部）。那么，你可以：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">Host db</span>
<span class="line">    HostName db.example.com</span>
<span class="line">    LocalForward <span class="token number">5433</span> localhost:5432</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>当你连接远程主机时，它会在本地打开一个 5433 端口，并将该端口的流量通过 ssh 转发到远程服务器上的 5432 端口。</p><p>首先，建立连接：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ <span class="token function">ssh</span> db</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>之后，就可以通过 Postgres 客户端连接本地 5433 端口：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">$ psql <span class="token parameter variable">-h</span> localhost <span class="token parameter variable">-p</span> <span class="token number">5433</span> orders</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="代理" tabindex="-1"><a class="header-anchor" href="#代理"><span>代理</span></a></h2><p>有的时候你可能没法直接登录到某台服务器，而需要使用一台中间服务器进行中转，如公司内网服务器。首先确保你已经为服务器配置了公钥访问，并开启了 agent forwarding，那么你需要添加如下配置到 <code>~/.ssh/config</code>：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">Host gateway</span>
<span class="line">    HostName proxy.example.com</span>
<span class="line">    User root</span>
<span class="line">Host db</span>
<span class="line">    HostName db.internal.example.com                  <span class="token comment"># 目标服务器地址</span></span>
<span class="line">    User root                                         <span class="token comment"># 用户名</span></span>
<span class="line">    <span class="token comment"># IdentityFile ~/.ssh/id_ecdsa                    # 认证文件</span></span>
<span class="line">    ProxyCommand <span class="token function">ssh</span> gateway netcat <span class="token parameter variable">-q</span> <span class="token number">600</span> %h %p      <span class="token comment"># 代理命令</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link label" href="https://github.com/liujia6/liujia6.github.io/edit/main/dev-ops/ssh.md" aria-label="帮助我们改善此页面！" rel="noopener noreferrer" target="_blank"><!--[--><svg class="edit-icon" viewbox="0 0 1024 1024"><g fill="currentColor"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></g></svg><!--]-->帮助我们改善此页面！<!----></a></div><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: liujia11@qianxin.com">liujia6</span><!----><!--]--><!--]--></span></div></div></footer><nav class="vp-page-nav" aria-label="page navigation"><!----><a class="route-link auto-link next" href="/dev-ops/linux.html" aria-label="linux 总结"><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span>linux 总结</span></div></a></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-BYS36vur.js" defer></script>
  </body>
</html>
