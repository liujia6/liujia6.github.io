<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.13" />
    <style>
      :root {
        --c-bg: #fff;
      }

      html.dark {
        --c-bg: #22272e;
      }

      html,
      body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia('(prefers-color-scheme: dark)').matches
      if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
        document.documentElement.classList.toggle('dark', true)
      }
    </script>
    <link rel="icon" href="/favicon.ico"><title>package.json | 游离 の Blog</title><meta name="description" content="">
    <link rel="preload" href="/assets/style-DVu-nCvE.css" as="style"><link rel="stylesheet" href="/assets/style-DVu-nCvE.css">
    <link rel="modulepreload" href="/assets/app-BrW2q7b4.js"><link rel="modulepreload" href="/assets/package.json.html-B0pihIvy.js">
    <link rel="prefetch" href="/assets/index.html-BWjF6f1y.js" as="script"><link rel="prefetch" href="/assets/Error.html-6L3ehomY.js" as="script"><link rel="prefetch" href="/assets/RXJS.html-BnNRrTag.js" as="script"><link rel="prefetch" href="/assets/ts.html-Bx1beIx3.js" as="script"><link rel="prefetch" href="/assets/二进制.html-Di4VqwhH.js" as="script"><link rel="prefetch" href="/assets/基础.html-DyEMZJG-.js" as="script"><link rel="prefetch" href="/assets/异步.html-DsKiYmRF.js" as="script"><link rel="prefetch" href="/assets/手写代码系列.html-BtXrCMcl.js" as="script"><link rel="prefetch" href="/assets/类型转换.html-BeEO8E5q.js" as="script"><link rel="prefetch" href="/assets/错误处理.html-C_3HUyiQ.js" as="script"><link rel="prefetch" href="/assets/Vue2响应式原理.html-DEXLKuBA.js" as="script"><link rel="prefetch" href="/assets/Vue3新特性.html-B7V6scEa.js" as="script"><link rel="prefetch" href="/assets/Vuejs设计与实现.html-BtAO4W9a.js" as="script"><link rel="prefetch" href="/assets/Vue使用总结.html-ihPG-QKx.js" as="script"><link rel="prefetch" href="/assets/Vue命名方式.html-D66d7_XN.js" as="script"><link rel="prefetch" href="/assets/keep-alive.html-DNDFs8iE.js" as="script"><link rel="prefetch" href="/assets/key值.html-Bb_k8wg_.js" as="script"><link rel="prefetch" href="/assets/ansible.html-C6g-KqPB.js" as="script"><link rel="prefetch" href="/assets/bash.html-tD5OcEMl.js" as="script"><link rel="prefetch" href="/assets/docker.html-C0EK9qMi.js" as="script"><link rel="prefetch" href="/assets/gitlab-ci.html-pP-mprs9.js" as="script"><link rel="prefetch" href="/assets/linux.html-DuIu1EJv.js" as="script"><link rel="prefetch" href="/assets/nginx.html-BwXQE3rA.js" as="script"><link rel="prefetch" href="/assets/ssh.html-Cr4G5wHd.js" as="script"><link rel="prefetch" href="/assets/CSS.html-Buyb0tZS.js" as="script"><link rel="prefetch" href="/assets/less_postcss.html-BVp-Z_9W.js" as="script"><link rel="prefetch" href="/assets/index.html-DmDtj-ul.js" as="script"><link rel="prefetch" href="/assets/babel.html-Boj68e1q.js" as="script"><link rel="prefetch" href="/assets/git.html-DWAxeivx.js" as="script"><link rel="prefetch" href="/assets/webpack.html-C83cDnCD.js" as="script"><link rel="prefetch" href="/assets/代码风格统一指南.html-BuJAlcCk.js" as="script"><link rel="prefetch" href="/assets/模块化.html-Cejq3LFr.js" as="script"><link rel="prefetch" href="/assets/测试.html-0uBltJKT.js" as="script"><link rel="prefetch" href="/assets/OAuth2.0与微信登陆.html-CscxUpRd.js" as="script"><link rel="prefetch" href="/assets/index.html-Db4bStpy.js" as="script"><link rel="prefetch" href="/assets/微前端.html-BSvp_gme.js" as="script"><link rel="prefetch" href="/assets/移动端适配.html-Cmca8Ok_.js" as="script"><link rel="prefetch" href="/assets/页面渲染探索和演进.html-Qo_hNjop.js" as="script"><link rel="prefetch" href="/assets/a-life-of-a-pixel浏览器渲染.html-jw6sIwPv.js" as="script"><link rel="prefetch" href="/assets/layoutNG.html-JR9nLoQ3.js" as="script"><link rel="prefetch" href="/assets/变化.html-mwGkrCW3.js" as="script"><link rel="prefetch" href="/assets/浏览器基础.html-CRkJHNrR.js" as="script"><link rel="prefetch" href="/assets/浏览器架构.html-CAf7SqBR.js" as="script"><link rel="prefetch" href="/assets/index.html-B5jsrVB4.js" as="script"><link rel="prefetch" href="/assets/买卖股票.html-0DB9jV6T.js" as="script"><link rel="prefetch" href="/assets/二叉树.html-BxPW6mkh.js" as="script"><link rel="prefetch" href="/assets/其他构造类.html-7TtWiGbd.js" as="script"><link rel="prefetch" href="/assets/动态规划.html-ZhzoiiRU.js" as="script"><link rel="prefetch" href="/assets/十大排序.html-f39vHcvu.js" as="script"><link rel="prefetch" href="/assets/双指针.html-BG_n0c6H.js" as="script"><link rel="prefetch" href="/assets/回溯.html-CqT6bsds.js" as="script"><link rel="prefetch" href="/assets/子串子序列系列.html-DoQPGohW.js" as="script"><link rel="prefetch" href="/assets/字符串.html-DA17USfc.js" as="script"><link rel="prefetch" href="/assets/排序相关.html-CKQE0mp3.js" as="script"><link rel="prefetch" href="/assets/数学.html-DokcWbyq.js" as="script"><link rel="prefetch" href="/assets/数组.html-BYt6Ugeu.js" as="script"><link rel="prefetch" href="/assets/栈.html-Cwfhp9SX.js" as="script"><link rel="prefetch" href="/assets/背包.html-y93RejR-.js" as="script"><link rel="prefetch" href="/assets/链表.html-C7ckLXTA.js" as="script"><link rel="prefetch" href="/assets/Airbnb.html-BqkUmbz2.js" as="script"><link rel="prefetch" href="/assets/plantuml.html-C61zat70.js" as="script"><link rel="prefetch" href="/assets/函数式编程.html-BokehVwP.js" as="script"><link rel="prefetch" href="/assets/架构整洁之道.html-Buu4VkFE.js" as="script"><link rel="prefetch" href="/assets/状态机.html-DTFqfUMu.js" as="script"><link rel="prefetch" href="/assets/设计模式.html-B3uKr0f-.js" as="script"><link rel="prefetch" href="/assets/重构.html-PNVZsG2L.js" as="script"><link rel="prefetch" href="/assets/HTTP.html-BdWivgvq.js" as="script"><link rel="prefetch" href="/assets/HTTP权威指南.html-Bbxit3I_.js" as="script"><link rel="prefetch" href="/assets/TCP-UDP.html-B0rxmqaD.js" as="script"><link rel="prefetch" href="/assets/grpc.html-I6Qv70ZM.js" as="script"><link rel="prefetch" href="/assets/web状态存储.html-BMt4QesR.js" as="script"><link rel="prefetch" href="/assets/网络基础.html-Bz3p_kQ9.js" as="script"><link rel="prefetch" href="/assets/web安全.html-tyQstUuE.js" as="script"><link rel="prefetch" href="/assets/UDP.html-CC7rp_fh.js" as="script"><link rel="prefetch" href="/assets/404.html-DPhz3gYP.js" as="script"><link rel="prefetch" href="/assets/index.html-B9RJJ6JL.js" as="script"><link rel="prefetch" href="/assets/index.html-BXsFga01.js" as="script"><link rel="prefetch" href="/assets/index.html-BOAzOXCy.js" as="script"><link rel="prefetch" href="/assets/index.html-VxqBQShy.js" as="script"><link rel="prefetch" href="/assets/index.html-Bl4iWwN6.js" as="script"><link rel="prefetch" href="/assets/index.html-DNw_qDKx.js" as="script"><link rel="prefetch" href="/assets/index.html-DX15GyUC.js" as="script"><link rel="prefetch" href="/assets/index.html-DDntB1Sh.js" as="script"><link rel="prefetch" href="/assets/index.html-BVd_tTIu.js" as="script"><link rel="prefetch" href="/assets/style-l0sNRNKZ.js" as="script"><link rel="prefetch" href="/assets/docsearch-l0sNRNKZ.js" as="script"><link rel="prefetch" href="/assets/index-zMbLkDvU.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon"><!--[--><header class="vp-navbar"><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/"><!----><span class="vp-site-name" aria-hidden="true">游离 の Blog</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/liujia6/liujia6.github.io" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!---->GitHub<!----></a></div><!--]--></nav><!--[--><!--]--><button class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!--[--><div id="docsearch-container" style="display:none;"></div><div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar"><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/liujia6/liujia6.github.io" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!---->GitHub<!----></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">JS <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/JS/%E5%9F%BA%E7%A1%80.html" aria-label="基础"><!---->基础<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/JS/%E5%BC%82%E6%AD%A5.html" aria-label="异步"><!---->异步<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/JS/Error.html" aria-label="Error"><!---->Error<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/JS/%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86.html" aria-label="错误处理的应用"><!---->错误处理的应用<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/JS/%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2.html" aria-label="JS 类型与转换"><!---->JS 类型与转换<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/JS/%E6%89%8B%E5%86%99%E4%BB%A3%E7%A0%81%E7%B3%BB%E5%88%97.html" aria-label="手写代码"><!---->手写代码<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/JS/ts.html" aria-label="typescript"><!---->typescript<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/JS/RXJS.html" aria-label="RXJS"><!---->RXJS<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">Dev Ops <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/dev-ops/ssh.html" aria-label="ssh"><!---->ssh<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/dev-ops/linux.html" aria-label="linux 总结"><!---->linux 总结<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/dev-ops/nginx.html" aria-label="nginx"><!---->nginx<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/dev-ops/gitlab-ci.html" aria-label="Gitlab-CI"><!---->Gitlab-CI<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/dev-ops/ansible.html" aria-label="ansible"><!---->ansible<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/dev-ops/docker.html" aria-label="Docker"><!---->Docker<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">Vue <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/Vue/Vue2%E5%93%8D%E5%BA%94%E5%BC%8F%E5%8E%9F%E7%90%86.html" aria-label="Vue 响应式原理"><!---->Vue 响应式原理<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/Vue/Vue3%E6%96%B0%E7%89%B9%E6%80%A7.html" aria-label="vue3新特性"><!---->vue3新特性<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/Vue/Vue%E5%91%BD%E5%90%8D%E6%96%B9%E5%BC%8F.html" aria-label="vue 命名规范"><!---->vue 命名规范<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/Vue/Vue%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93.html" aria-label="vue 使用总结"><!---->vue 使用总结<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/Vue/Vuejs%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0.html" aria-label="Vuejs设计与实现"><!---->Vuejs设计与实现<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/Vue/keep-alive.html" aria-label="keep-alive 缓存"><!---->keep-alive 缓存<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/Vue/key%E5%80%BC.html" aria-label="vue 中 key 值的作用"><!---->vue 中 key 值的作用<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading active">工程化 <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/%E5%B7%A5%E7%A8%8B%E5%8C%96/git.html" aria-label="git"><!---->git<!----></a><!----></li><li><a class="route-link route-link-active auto-link vp-sidebar-item active" href="/%E5%B7%A5%E7%A8%8B%E5%8C%96/package.json.html" aria-label="package.json"><!---->package.json<!----></a><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="#yarn" aria-label="yarn"><!---->yarn<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="#依赖管理" aria-label="依赖管理"><!---->依赖管理<!----></a><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="#安装包" aria-label="安装包"><!---->安装包<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="#锁定依赖版本" aria-label="锁定依赖版本"><!---->锁定依赖版本<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item" href="#yarn-add-远程-git-协议" aria-label="yarn add 远程 git 协议"><!---->yarn add 远程 git 协议<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="#npm-scripts-使用指南" aria-label="npm scripts 使用指南"><!---->npm scripts 使用指南<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="#变量" aria-label="变量"><!---->变量<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="#npx" aria-label="npx"><!---->npx<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="#版本管理" aria-label="版本管理"><!---->版本管理<!----></a><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="#npm-版本语义化" aria-label="npm 版本语义化"><!---->npm 版本语义化<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="#查看-npm-包版本信息" aria-label="查看 npm 包版本信息"><!---->查看 npm 包版本信息<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item" href="#npm-源" aria-label="npm 源"><!---->npm 源<!----></a><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="#npmrc" aria-label="npmrc"><!---->npmrc<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item" href="#bin-字段与-script-字段" aria-label="bin 字段与 script 字段"><!---->bin 字段与 script 字段<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="#export-字段" aria-label="export 字段"><!---->export 字段<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="#pkg-中-module-字段" aria-label="pkg 中 module 字段"><!---->pkg 中 module 字段<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="#unpkg-和-cdn-js" aria-label="unpkg 和 cdn.js"><!---->unpkg 和 cdn.js<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="#package-json-非官方字段集合" aria-label="package.json 非官方字段集合"><!---->package.json 非官方字段集合<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="#其他" aria-label="其他"><!---->其他<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E5%B7%A5%E7%A8%8B%E5%8C%96/%E4%BB%A3%E7%A0%81%E9%A3%8E%E6%A0%BC%E7%BB%9F%E4%B8%80%E6%8C%87%E5%8D%97.html" aria-label="代码风格统一指南"><!---->代码风格统一指南<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E5%B7%A5%E7%A8%8B%E5%8C%96/babel.html" aria-label="Babel"><!---->Babel<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E5%B7%A5%E7%A8%8B%E5%8C%96/webpack.html" aria-label="webpack"><!---->webpack<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E5%B7%A5%E7%A8%8B%E5%8C%96/%E6%A8%A1%E5%9D%97%E5%8C%96.html" aria-label="模块化"><!---->模块化<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E5%B7%A5%E7%A8%8B%E5%8C%96/%E6%B5%8B%E8%AF%95.html" aria-label="测试"><!---->测试<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">算法 <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%AE%97%E6%B3%95/%E5%8D%81%E5%A4%A7%E6%8E%92%E5%BA%8F.html" aria-label="十大排序"><!---->十大排序<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%9B%B8%E5%85%B3.html" aria-label="排序相关"><!---->排序相关<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%AE%97%E6%B3%95/%E6%95%B0%E5%AD%A6.html" aria-label="数学"><!---->数学<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%AE%97%E6%B3%95/%E6%95%B0%E7%BB%84.html" aria-label="数组"><!---->数组<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%AE%97%E6%B3%95/%E9%93%BE%E8%A1%A8.html" aria-label="链表"><!---->链表<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%AE%97%E6%B3%95/%E6%A0%88.html" aria-label="栈"><!---->栈<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%AE%97%E6%B3%95/%E5%AD%97%E7%AC%A6%E4%B8%B2.html" aria-label="字符串"><!---->字符串<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%AE%97%E6%B3%95/%E5%AD%90%E4%B8%B2%E5%AD%90%E5%BA%8F%E5%88%97%E7%B3%BB%E5%88%97.html" aria-label="子串子序列系列"><!---->子串子序列系列<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%AE%97%E6%B3%95/%E4%BA%8C%E5%8F%89%E6%A0%91.html" aria-label="二叉树"><!---->二叉树<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%AE%97%E6%B3%95/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92.html" aria-label="动态规划"><!---->动态规划<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%AE%97%E6%B3%95/%E5%85%B6%E4%BB%96%E6%9E%84%E9%80%A0%E7%B1%BB.html" aria-label="其他构造类"><!---->其他构造类<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%AE%97%E6%B3%95/%E8%83%8C%E5%8C%85.html" aria-label="背包"><!---->背包<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%AE%97%E6%B3%95/%E4%B9%B0%E5%8D%96%E8%82%A1%E7%A5%A8.html" aria-label="买卖股票的最佳时机"><!---->买卖股票的最佳时机<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">网络 <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%BD%91%E7%BB%9C/HTTP.html" aria-label="HTTP"><!---->HTTP<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%BD%91%E7%BB%9C/HTTP%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97.html" aria-label="HTTP 权威指南"><!---->HTTP 权威指南<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80.html" aria-label="网络基础"><!---->网络基础<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%BD%91%E7%BB%9C/grpc.html" aria-label="grpc"><!---->grpc<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">计算机基础 <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/web%E5%AE%89%E5%85%A8.html" aria-label="web 安全"><!---->web 安全<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">编程 <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%BC%96%E7%A8%8B/%E9%87%8D%E6%9E%84.html" aria-label="重构"><!---->重构<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%BC%96%E7%A8%8B/%E6%9E%B6%E6%9E%84%E6%95%B4%E6%B4%81%E4%B9%8B%E9%81%93.html" aria-label="架构整洁之道"><!---->架构整洁之道<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%BC%96%E7%A8%8B/%E7%8A%B6%E6%80%81%E6%9C%BA.html" aria-label="状态机"><!---->状态机<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%BC%96%E7%A8%8B/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html" aria-label="设计模式"><!---->设计模式<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%BC%96%E7%A8%8B/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B.html" aria-label="函数式编程"><!---->函数式编程<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%BC%96%E7%A8%8B/plantuml.html" aria-label="plantuml"><!---->plantuml<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E7%BC%96%E7%A8%8B/Airbnb.html" aria-label="Airbnb"><!---->Airbnb<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">其他 <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/%E6%96%B0%E6%8A%80%E6%9C%AF/%E5%BE%AE%E5%89%8D%E7%AB%AF.html" aria-label="微前端"><!---->微前端<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E6%96%B0%E6%8A%80%E6%9C%AF/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%80%82%E9%85%8D.html" aria-label="移动端适配"><!---->移动端适配<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E6%96%B0%E6%8A%80%E6%9C%AF/OAuth2.0%E4%B8%8E%E5%BE%AE%E4%BF%A1%E7%99%BB%E9%99%86.html" aria-label="OAuth2.0与微信登陆"><!---->OAuth2.0与微信登陆<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E6%96%B0%E6%8A%80%E6%9C%AF/%E9%A1%B5%E9%9D%A2%E6%B8%B2%E6%9F%93%E6%8E%A2%E7%B4%A2%E5%92%8C%E6%BC%94%E8%BF%9B.html" aria-label="页面渲染探索和演进"><!---->页面渲染探索和演进<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">浏览器 <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/%E6%B5%8F%E8%A7%88%E5%99%A8/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%9F%BA%E7%A1%80.html" aria-label="浏览器基础"><!---->浏览器基础<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E6%B5%8F%E8%A7%88%E5%99%A8/%E6%B5%8F%E8%A7%88%E5%99%A8%E6%9E%B6%E6%9E%84.html" aria-label="浏览器架构"><!---->浏览器架构<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/%E6%B5%8F%E8%A7%88%E5%99%A8/a-life-of-a-pixel%E6%B5%8F%E8%A7%88%E5%99%A8%E6%B8%B2%E6%9F%93.html" aria-label="A life of a pixel"><!---->A life of a pixel<!----></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="package-json" tabindex="-1"><a class="header-anchor" href="#package-json"><span><a href="http://javascript.ruanyifeng.com/nodejs/packagejson.html#toc6" target="_blank" rel="noopener noreferrer">package.json</a></span></a></h1><p>可以使用<a href="https://github.com/antfu/ni" target="_blank" rel="noopener noreferrer">ni</a>包管理器，统一<a href="https://docs.npmjs.com/cli/v6/commands/npm" target="_blank" rel="noopener noreferrer">npm</a> · <a href="https://yarnpkg.com/" target="_blank" rel="noopener noreferrer">yarn</a> · <a href="https://pnpm.js.org/en/" target="_blank" rel="noopener noreferrer">pnpm</a> · <a href="https://bun.sh/" target="_blank" rel="noopener noreferrer">bun</a> 各类不同项目的包管理器的自动切换以及命令统一</p><h2 id="yarn" tabindex="-1"><a class="header-anchor" href="#yarn"><span><a href="https://juejin.im/post/5da9c6b0e51d4524d67486e2#heading-4" target="_blank" rel="noopener noreferrer">yarn</a></span></a></h2><ul><li>yarn 会将安装过的包缓存下来，这样再次安装相同包的时候，就不需要再去下载，而是直接从缓存文件中直接 copy 进来。 可以通过命令 yarn cache dir 查看 yarn 的全局缓存目录。我的缓存目录在 /Library/Caches/Yarn/v1 下。</li><li>yarn.lock 文件是在安装期间，由 Yarn 自动生成的，并且由 yarn 来管理，不应该手动去更改，更不应该删除 yarn.lock 文件，且要提交到版本控制系统中，以免因为不同机器安装的包版本不一致引发问题</li></ul><h2 id="依赖管理" tabindex="-1"><a class="header-anchor" href="#依赖管理"><span>依赖管理</span></a></h2><ul><li><p><code>peerDependency</code>： 从 npm 3.0 版开始，<code>peerDependencies</code>不再会默认安装了。一些常用的包会被添加在 b 包的 peerDependencies 里，比如 react、react-router 等，可以认为工作项目 a 中一定已经安装了这些指定版本的依赖，少数情况下才需要手动安装。</p></li><li><p><code>dependencies</code> ：是项目运行所依赖的包。</p></li><li><p><code>devDependencies</code> ：是开发阶段所需要的包</p></li><li><p><code>optionalDependencies</code>：如果有一些依赖包即使安装失败，项目仍然能够运行或者希望 npm 继续运行，就可以使用 optionalDependencies。另外 optionalDependencies 会覆盖 dependencies 中的同名依赖包，所以不要在两个地方都写</p></li><li><p><a href="https://laysent.com/til/2020-01-08_bundleddependencies" target="_blank" rel="noopener noreferrer">bundleDenpendencies</a>： 这些指定的包也将在发布的时候一并被打包。这样，当其他人使用这个包的时候，就可以直接使用打包在项目内的依赖，而不需要在通过包管理器去下载了。</p></li><li><p>应用开发时无需关注以下类型的依赖，不同类型的依赖在使用时并无区别，yarn时两者都需要安装，一般只区分dependencies与devDependencies作为项目开发规范</p></li><li><p>而开发库时，需要关注以上类型不同类型的dependencies，在安装库时有实际区分</p></li></ul><h3 id="安装包" tabindex="-1"><a class="header-anchor" href="#安装包"><span><a href="https://docs.npmjs.com/cli/v7/commands/npm-install" target="_blank" rel="noopener noreferrer">安装包</a></span></a></h3><p>可以从各种路径安装一个包，见以下命令</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">npm</span> <span class="token function">install</span> <span class="token punctuation">(</span>with no args, <span class="token keyword">in</span> package <span class="token function">dir</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token function">npm</span> <span class="token function">install</span> <span class="token punctuation">[</span><span class="token operator">&lt;</span>@scope<span class="token operator">&gt;</span>/<span class="token punctuation">]</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span></span>
<span class="line"><span class="token function">npm</span> <span class="token function">install</span> <span class="token punctuation">[</span><span class="token operator">&lt;</span>@scope<span class="token operator">&gt;</span>/<span class="token punctuation">]</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>@<span class="token operator">&lt;</span>tag<span class="token operator">&gt;</span></span>
<span class="line"><span class="token function">npm</span> <span class="token function">install</span> <span class="token punctuation">[</span><span class="token operator">&lt;</span>@scope<span class="token operator">&gt;</span>/<span class="token punctuation">]</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>@<span class="token operator">&lt;</span>version<span class="token operator">&gt;</span></span>
<span class="line"><span class="token function">npm</span> <span class="token function">install</span> <span class="token punctuation">[</span><span class="token operator">&lt;</span>@scope<span class="token operator">&gt;</span>/<span class="token punctuation">]</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>@<span class="token operator">&lt;</span>version range<span class="token operator">&gt;</span></span>
<span class="line"><span class="token function">npm</span> <span class="token function">install</span> <span class="token operator">&lt;</span>alias<span class="token operator">&gt;</span>@npm:<span class="token operator">&lt;</span>name<span class="token operator">&gt;</span></span>
<span class="line"><span class="token function">npm</span> <span class="token function">install</span> <span class="token operator">&lt;</span>git-host<span class="token operator">&gt;</span>:<span class="token operator">&lt;</span>git-user<span class="token operator">&gt;</span>/<span class="token operator">&lt;</span>repo-name<span class="token operator">&gt;</span></span>
<span class="line"><span class="token function">npm</span> <span class="token function">install</span> <span class="token operator">&lt;</span>git repo url<span class="token operator">&gt;</span></span>
<span class="line"><span class="token function">npm</span> <span class="token function">install</span> <span class="token operator">&lt;</span>tarball file<span class="token operator">&gt;</span></span>
<span class="line"><span class="token function">npm</span> <span class="token function">install</span> <span class="token operator">&lt;</span>tarball url<span class="token operator">&gt;</span></span>
<span class="line"><span class="token function">npm</span> <span class="token function">install</span> <span class="token operator">&lt;</span>folder<span class="token operator">&gt;</span></span>
<span class="line"></span>
<span class="line">aliases: <span class="token function">npm</span> i, <span class="token function">npm</span> <span class="token function">add</span></span>
<span class="line">common options: <span class="token punctuation">[</span>-P<span class="token operator">|</span>--save-prod<span class="token operator">|</span>-D<span class="token operator">|</span>--save-dev<span class="token operator">|</span>-O<span class="token operator">|</span>--save-optional<span class="token operator">|</span>--save-peer<span class="token punctuation">]</span> <span class="token punctuation">[</span>-E<span class="token operator">|</span>--save-exact<span class="token punctuation">]</span> <span class="token punctuation">[</span>-B<span class="token operator">|</span>--save-bundle<span class="token punctuation">]</span> <span class="token punctuation">[</span>--no-save<span class="token punctuation">]</span> <span class="token punctuation">[</span>--dry-run<span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="锁定依赖版本" tabindex="-1"><a class="header-anchor" href="#锁定依赖版本"><span><a href="https://mp.weixin.qq.com/s/Qrzn3rLKfMI9V6diQ_7vBg" target="_blank" rel="noopener noreferrer">锁定依赖版本</a></span></a></h3><h4 id="lock-文件" tabindex="-1"><a class="header-anchor" href="#lock-文件"><span>lock 文件</span></a></h4><p>实际开发中，经常会因为各种依赖不一致而产生奇怪的问题，或者在某些场景下，我们不希望依赖被更新，建议在开发中使用 <code>package-lock.json</code>。</p><p>锁定依赖版本意味着在我们不手动执行更新的情况下，每次安装依赖都会安装固定版本。保证整个团队使用版本号一致的依赖。</p><p>每次安装固定版本，无需计算依赖版本范围，大部分场景下能大大加速依赖安装时间。</p><blockquote><p>使用 package-lock.json 要确保 npm 的版本在 5.6 以上，因为在 5.0 - 5.6 中间，对 package-lock.json 的处理逻辑进行过几次更新，5.6 版本后处理逻辑逐渐稳定。</p></blockquote><p>关于 <code>package-lock.json</code> 详细的结构，我们会在后面的章节进行解析。</p><h4 id="定期更新依赖" tabindex="-1"><a class="header-anchor" href="#定期更新依赖"><span>定期更新依赖</span></a></h4><p>我们的目的是保证团队中使用的依赖一致或者稳定，而不是永远不去更新这些依赖。实际开发场景下，我们虽然不需要每次都去安装新的版本，仍然需要定时去升级依赖版本，来让我们享受依赖包升级带来的问题修复、性能提升、新特性更新。</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/aDoYvepE5x0MbmLUkEwkhrI7KF9cHZTf1VH7ad5bwuJia8YvCUzGqiago5Uoic0Oomia2gpqMjibHoy8qDkicFUg3vvg/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="图片"></p><p>使用 <code>npm outdated</code> 可以帮助我们列出有哪些还没有升级到最新版本的依赖：</p><ul><li>黄色表示不符合我们指定的语意化版本范围 - 不需要升级</li><li>红色表示符合指定的语意化版本范围 - 需要升级</li></ul><p>执行 <code>npm update</code> 会升级所有的红色依赖。</p><h2 id="yarn-add-远程-git-协议" tabindex="-1"><a class="header-anchor" href="#yarn-add-远程-git-协议"><span><a href="https://stackoverflow.com/questions/31801271/what-are-the-supported-git-url-formats" target="_blank" rel="noopener noreferrer">yarn add 远程 git 协议</a></span></a></h2><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line">yarn add <span class="token operator">&lt;</span>git remote url<span class="token operator">&gt;</span> installs a <span class="token keyword">package</span> from a remote git repository<span class="token punctuation">.</span></span>
<span class="line">yarn add <span class="token operator">&lt;</span>git remote url<span class="token operator">&gt;</span>#<span class="token operator">&lt;</span>branch<span class="token operator">/</span>commit<span class="token operator">/</span>tag<span class="token operator">&gt;</span> installs a <span class="token keyword">package</span> from a remote git repository at specific git branch<span class="token punctuation">,</span> git commit or git tag<span class="token punctuation">.</span></span>
<span class="line">yarn add https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>my<span class="token operator">-</span>project<span class="token punctuation">.</span>org<span class="token operator">/</span><span class="token keyword">package</span><span class="token punctuation">.</span>tgz installs a <span class="token keyword">package</span> from a remote gzipped tarball<span class="token punctuation">.</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Here are some examples:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line">yarn add https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>github<span class="token punctuation">.</span>com<span class="token operator">/</span>fancyapps<span class="token operator">/</span>fancybox <span class="token punctuation">[</span>remote url<span class="token punctuation">]</span></span>
<span class="line">yarn add ssh<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>github<span class="token punctuation">.</span>com<span class="token operator">/</span>fancyapps<span class="token operator">/</span>fancybox#<span class="token number">3.0</span>  <span class="token punctuation">[</span>branch<span class="token punctuation">]</span></span>
<span class="line">yarn add https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>github<span class="token punctuation">.</span>com<span class="token operator">/</span>fancyapps<span class="token operator">/</span>fancybox#5cda5b529ce3fb6c167a55d42ee5a316e921d95f <span class="token punctuation">[</span>commit<span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><em>(Note: Fancybox v2.6.1 isn&#39;t available in the Git version.)</em></p><p>To support both npm and yarn, you can use the git+url syntax:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">git+https://github.com/owner/package.git<span class="token comment">#commithashortagorbranch</span></span>
<span class="line">git+ssh://github.com/owner/package.git<span class="token comment">#commithashortagorbranch</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ol><li><code>yarn add package-name</code></li><li><code>yarn add file:/path/to/local/folder</code></li><li><code>yarn add file:/path/to/local/tarball.tgz</code> installs a package from a gzipped tarball which could be used to share a package before publishing it.</li><li><code>yarn add link:/path/to/local/folder</code></li><li><code>yarn add &lt;git remote url&gt;</code> installs a package from a remote git repository.</li><li><code>yarn add &lt;git remote url&gt;#&lt;branch/commit/tag&gt;</code> installs a package from a remote git repository at specific git branch, git commit or git tag.</li><li><code>yarn add https://my-project.org/package.tgz</code> installs a package from a remote gzipped tarball.</li></ol><h2 id="npm-scripts-使用指南" tabindex="-1"><a class="header-anchor" href="#npm-scripts-使用指南"><span><a href="http://www.ruanyifeng.com/blog/2016/10/npm_scripts.html" target="_blank" rel="noopener noreferrer">npm scripts 使用指南</a></span></a></h2><p>script 脚本传参 -- arguments</p><p>而<code>npm restart</code>是一个复合命令,实际上会执行三个脚本命令：<code>stop</code>、<code>restart</code>、<code>start</code>。其分别有自己的pre和post命令</p><h2 id="变量" tabindex="-1"><a class="header-anchor" href="#变量"><span>变量</span></a></h2><p>首先，通过<code>npm_package_</code>前缀，npm 脚本可以拿到<code>package.json</code>里面的字段</p><p><a href="https://mp.weixin.qq.com/s/I4hhrgI3-Y18HD8zw_9g9w" target="_blank" rel="noopener noreferrer">调试指南</a></p><p>除了npm link ，本地测试其实可以直接修改使用模块的引用路径为本地的绝对路径，或者用<a href="https://juejin.cn/post/7033400734746066957" target="_blank" rel="noopener noreferrer">yalc</a>替换</p><ul><li>使用yalc可以解决依赖解析、文件系统之间的符号链接互操作性等问题</li></ul><h2 id="npx" tabindex="-1"><a class="header-anchor" href="#npx"><span>npx</span></a></h2><p>它会自动查找当前依赖包中的二进制可执行文件，如果找不到，就会去 PATH 里找。如果依然找不到，就会帮你安装，解决一次性命令的使用问题</p><ul><li>用于临时使用 npm 模块，而不需要全局安装</li><li><code>npx --no-install http-server</code></li><li><code>npx --ignore-existing create-react-app my-react-app</code></li><li><code>npx https://gist.github.com/zkat/4bc19503fe9e9309e2bfaa2c58074d32</code> 执行 Gist 代码</li><li>在以往中，我们在 node 项目中要执行一个脚本，需要将它在 scripts 中声明，用了 npx 以后呢，你不需要在 scripts 中声明了，就可以直接敲键盘了（npx 开头，然后接你要执行的内容）：</li></ul><h2 id="版本管理" tabindex="-1"><a class="header-anchor" href="#版本管理"><span><a href="https://mp.weixin.qq.com/s/Qrzn3rLKfMI9V6diQ_7vBg" target="_blank" rel="noopener noreferrer">版本管理</a></span></a></h2><table><thead><tr><th>命令</th><th>结果</th></tr></thead><tbody><tr><td>npm version patch</td><td>v1.0.1</td></tr><tr><td>npm version major</td><td>v1.1.0</td></tr><tr><td>npm version minor</td><td>v2.0.0</td></tr></tbody></table><p>minor.major.patch</p><h3 id="npm-版本语义化" tabindex="-1"><a class="header-anchor" href="#npm-版本语义化"><span><a href="https://www.jianshu.com/p/a7490344044f" target="_blank" rel="noopener noreferrer">npm 版本语义化</a></span></a></h3><p>npm 版本 a-b-c</p><ul><li>a 是大版本，a 不同可能会有兼容性问题</li><li>b 是 feature</li><li>c 是 fix</li></ul><p>MAJOR.MINOR.PATCH</p><p>alpha - 开发 （内测） --&gt; beta - 测试 （公测）--&gt; rc - 灰度 （候选）</p><h4 id="升级版本号的规则主要有三个" tabindex="-1"><a class="header-anchor" href="#升级版本号的规则主要有三个"><span>升级版本号的规则主要有三个</span></a></h4><ul><li><p>主版本号：当你做了不兼容的 API 修改，为 0 时，处于开发阶段</p></li><li><p>次版本号：当你做了向下兼容的功能性新增，不一定向下兼容</p></li><li><p>修订号：当你做了向下兼容的问题修正</p></li><li><p>先行版本号 ：正式版本之前的版本，用于发布一个新的不兼容的主版本号</p></li><li><p>版本编译信息 在先行版本号后加上“+”号的标识符，</p></li><li><p>^表示在同一个<strong>主</strong>版本号中，大于等于指定版本号，也即升级 minor 次版本号</p></li><li><p>~表示在同一<strong>主次</strong>版本号中，大于等于指定版本号，也即升级 patch 修订版本号</p></li></ul><h3 id="查看-npm-包版本信息" tabindex="-1"><a class="header-anchor" href="#查看-npm-包版本信息"><span>查看 npm 包版本信息</span></a></h3><h4 id="原理" tabindex="-1"><a class="header-anchor" href="#原理"><span>原理</span></a></h4><p><code>npm update</code>命令怎么知道每个模块的最新版本呢？</p><ul><li>npm 模块仓库提供了一个查询服务，叫做 registry 。以 npmjs.org 为例，它的查询服务网址是 <a href="https://registry.npmjs.org/" target="_blank" rel="noopener noreferrer"><code>https://registry.npmjs.org/</code></a> ，这个网址后面跟上模块名，就会得到一个 JSON 对象，里面是该模块所有版本的信息。比如，访问 <a href="https://registry.npmjs.org/react" target="_blank" rel="noopener noreferrer"><code>https://registry.npmjs.org/react</code></a>，就会看到 react 模块所有版本的信息。</li></ul><h4 id="命令操作" tabindex="-1"><a class="header-anchor" href="#命令操作"><span>命令操作</span></a></h4><p>你可以执行 <code>npm view package version</code> 查看某个 <code>package</code> 的最新版本</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">npm</span> view react</span>
<span class="line"></span>
<span class="line"><span class="token comment"># npm view 的别名</span></span>
<span class="line"><span class="token function">npm</span> info react</span>
<span class="line"><span class="token function">npm</span> show react</span>
<span class="line"><span class="token function">npm</span> <span class="token function">v</span> react</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 查看包的所有版本</span></span>
<span class="line"><span class="token function">npm</span> view react versions</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 查看当前仓库依赖树上所有包的版本信息</span></span>
<span class="line"><span class="token function">npm</span> <span class="token function">ls</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://img-blog.csdnimg.cn/20190914141436350.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTExMjcwMTk=,size_16,color_FFFFFF,t_70" alt="npm更新模块命令_天马3798-CSDN博客_npm 更新模块"></p><h4 id="dist-tag" tabindex="-1"><a class="header-anchor" href="#dist-tag"><span><a href="https://www.jianshu.com/p/91902bae5572" target="_blank" rel="noopener noreferrer">dist-tag</a></span></a></h4><ul><li><p>标签可用于提供别名而不是版本号。</p></li><li><p>例如，一个项目可能会选择有发展的多个数据流，并使用不同的标签为每个数据流，如 stable，beta，dev，canary。</p></li><li><p>默认，npm 使用 latest 来标识软件包的当前版本，并且 <code>npm install &lt;pkg&gt;</code>（无任何 <code>@&lt;version&gt;</code>或 <code>@&lt;tag&gt;</code> 指定符）安装该 latest 标签。</p></li><li><p>一般项目仅将 latest 标记用于稳定的发行版本，而将其他标记用于不稳定的版本，例如预发行。</p></li><li><p>next ：一些项目使用该标签来标识即将发布的版本。</p></li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># 使用</span></span>
<span class="line"><span class="token function">npm</span> dist-tag <span class="token function">ls</span> <span class="token punctuation">[</span><span class="token operator">&lt;</span>pkg<span class="token operator">&gt;</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token function">npm</span> dist-tag <span class="token function">add</span> <span class="token operator">&lt;</span>pkg<span class="token operator">&gt;</span>@<span class="token operator">&lt;</span>version<span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token operator">&lt;</span>tag<span class="token operator">&gt;</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token function">npm</span> dist-tag <span class="token function">rm</span> <span class="token operator">&lt;</span>pkg<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>tag<span class="token operator">&gt;</span></span>
<span class="line"><span class="token function">npm</span> dist-tag <span class="token function">ls</span> <span class="token punctuation">[</span><span class="token operator">&lt;</span>pkg<span class="token operator">&gt;</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token comment"># 安装依赖项时，可以指定首选的标记版本：</span></span>
<span class="line"><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">--tag</span> <span class="token operator">&lt;</span>tag<span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># 发布一个带tag的版本，默认是latest,以下命令中tag是next</span></span>
<span class="line"><span class="token function">npm</span> publish <span class="token parameter variable">--tag</span> next</span>
<span class="line"><span class="token comment"># 可以通过以下命令安装所属next的最新版本</span></span>
<span class="line"><span class="token function">npm</span> <span class="token function">install</span> my-package@next</span>
<span class="line"><span class="token comment"># 修改tagName</span></span>
<span class="line"><span class="token function">npm</span> dist-tag <span class="token function">add</span> my-package@version next</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="npm-源" tabindex="-1"><a class="header-anchor" href="#npm-源"><span>npm 源</span></a></h2><p>以下配置源的方法优先级从高到低</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># 为单包指定特定源</span></span>
<span class="line"><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> cnpm <span class="token parameter variable">--registry</span><span class="token operator">=</span>https://registry.npm.taobao.org</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 项目中创建配置文件.npmrc</span></span>
<span class="line">@scopename:registry<span class="token operator">=</span><span class="token operator">&lt;</span>registry url<span class="token operator">&gt;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 查看配置的源使用 npm config get registry &lt;registry url&gt;</span></span>
<span class="line"><span class="token function">npm</span> config <span class="token builtin class-name">set</span> registry <span class="token operator">&lt;</span>registry url<span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="npmrc" tabindex="-1"><a class="header-anchor" href="#npmrc"><span>npmrc</span></a></h3><p>通过项目中配置 npmrc，我们可以方便地在工程跟目录创建一个 .npmrc 文件来共享需要在团队间共享的 npm 运行相关配置。比如如果我们在公司内网环境下需通过代理才可访问 registry.npmjs.org 源，或需访问内网的 registry, 就可以在工作项目下新增 .npmrc 文件并提交代码库。</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">proxy <span class="token operator">=</span> http://proxy.example.com/</span>
<span class="line">https-proxy <span class="token operator">=</span> http://proxy.example.com/</span>
<span class="line">registry <span class="token operator">=</span> http://registry.example.com/</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a href="https://segmentfault.com/a/1190000017419993" target="_blank" rel="noopener noreferrer">nrm 切换源</a></p><h2 id="bin-字段与-script-字段" tabindex="-1"><a class="header-anchor" href="#bin-字段与-script-字段"><span><a href="http://www.ruanyifeng.com/blog/2016/10/npm_scripts.html" target="_blank" rel="noopener noreferrer">bin 字段与 script 字段</a></span></a></h2><p>npm 脚本的原理非常简单。每当执行<code>npm run</code>，就会自动新建一个 Shell，在这个 Shell 里面执行指定的脚本命令。因此，只要是 Shell（一般是 Bash）可以运行的命令，就可以写在 npm 脚本里面。</p><p>比较特别的是，<code>npm run</code>新建的这个 Shell，会将当前目录的<code>node_modules/.bin</code>子目录加入<code>PATH</code>变量，执行结束后，再将<code>PATH</code>变量恢复原样。</p><p>这意味着，当前目录的<code>node_modules/.bin</code>子目录里面的所有脚本，都可以直接用脚本名调用，而不必加上路径。比如，当前项目的依赖里面有 Mocha，只要直接写<code>mocha test</code>就可以了。</p><h4 id="本地调试命令别名" tabindex="-1"><a class="header-anchor" href="#本地调试命令别名"><span>本地调试命令别名</span></a></h4><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token string-property property">&quot;bin&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token string-property property">&quot;myapp&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;node index&quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以上配置后，可以在项目目录下运行 myapp，相当于 node index 命令。相当于一个命令别名</p><h4 id="指定各个内部命令对应的可执行文件" tabindex="-1"><a class="header-anchor" href="#指定各个内部命令对应的可执行文件"><span>指定各个内部命令对应的可执行文件</span></a></h4><p>bin 项用来指定各个内部命令对应的可执行文件的位置。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token string-property property">&quot;bin&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token string-property property">&quot;someTool&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./bin/someTool.js&quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面代码指定，someTool 命令对应的可执行文件为 bin 子目录下的 someTool.js。</p><p>在上面的例子中，someTool.js 会建立符号链接 node_modules/.bin/someTool。</p><p>由于 node_modules/.bin/目录会在运行时加入系统的 PATH 变量，因此在运行 npm 时，就可以不带路径，直接通过命令来调用这些脚本。</p><p>因此，像下面这样的写法可以采用简写。</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token literal-property property">scripts</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">start</span><span class="token operator">:</span> <span class="token string">&#39;./node_modules/bin/someTool.js build&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 简写为</span></span>
<span class="line"></span>
<span class="line"><span class="token literal-property property">scripts</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">start</span><span class="token operator">:</span> <span class="token string">&#39;someTool build&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在安装第三方带有 bin 字段的 npm，那可执行文件会被链接到当前项目的./node_modules/.bin 中，在本项目中，就可以很方便地利用 npm 执行脚本（package.json 文件中 scripts 可以直接执行：&#39;node node_modules/.bin/myapp&#39;）；</p><ol><li>如果是全局安装，npm 将会使用符号链接把这些文件链接到/usr/local/bin/（MAC），那么各个地方都可以使用指定命令了</li><li>如果是本地安装，会链接到./node_modules/.bin/。 <ul><li>所有 node_modules/.bin/目录下的命令，都可以用 npm run [命令]的格式运行。在</li><li>命令行下，键入 npm run，然后按 tab 键，就会显示所有可以使用的命令。</li></ul></li></ol><h2 id="export-字段" tabindex="-1"><a class="header-anchor" href="#export-字段"><span><a href="https://www.baobangdong.cn/node.js-package.json-field-definitions/" target="_blank" rel="noopener noreferrer">export 字段</a></span></a></h2><p>他最大的一个特性就是 <strong>条件导出（Conditional Exports）</strong>，当该 package 被导入时，能够判断被导入时的模块环境，从而执行不同的文件，简而言之就是，我们如果使用 <code>import</code> 命令，入口会加载 ECMAScript Modules 文件，如果使用 <code>require</code> 命令，入口则加载 CommonJS Modules 文件。</p><h2 id="pkg-中-module-字段" tabindex="-1"><a class="header-anchor" href="#pkg-中-module-字段"><span><a href="https://zhuanlan.zhihu.com/p/34164963" target="_blank" rel="noopener noreferrer">pkg 中 module 字段</a></span></a></h2><p>module 字段用来标注库中 esm 版本的入口，若库中包含此字段，则表示支持 treeShaking</p><h2 id="unpkg-和-cdn-js" tabindex="-1"><a class="header-anchor" href="#unpkg-和-cdn-js"><span><a href="https://segmentfault.com/a/1190000040875211" target="_blank" rel="noopener noreferrer">unpkg 和 cdn.js</a></span></a></h2><ul><li><a href="https://developer.aliyun.com/article/592213" target="_blank" rel="noopener noreferrer">unpkg</a> 是一个快速的全球内容分发网络，适用于 npm 上的所有内容。使用它可以使用以下 URL 快速轻松地从任何包加载任何文件：<code>unpkg.com/:package@:version/:file</code></li><li>cdnjs 提供了一个简单的 API，允许任何人快速查询 CDN 上的资源,<code>https://api.cdnjs.com/libraries?search=jquery</code>，返回一个<a href="https://image-static.segmentfault.com/803/289/803289998-33093935360af500_fix732" target="_blank" rel="noopener noreferrer">以 jquery 为搜索条件的包 cdn 列表</a>，这是一个 get 请求，数组的第一项为名称/功能最相近的资源的最新 CDN 资源地址</li></ul><h2 id="package-json-非官方字段集合" tabindex="-1"><a class="header-anchor" href="#package-json-非官方字段集合"><span><a href="https://segmentfault.com/a/1190000016365409" target="_blank" rel="noopener noreferrer">package.json 非官方字段集合</a></span></a></h2><h2 id="其他" tabindex="-1"><a class="header-anchor" href="#其他"><span>其他</span></a></h2><ul><li><a href="https://juejin.cn/post/6962554654643191815" target="_blank" rel="noopener noreferrer">手把手教你使用 patch-package 给 npm 包打补丁</a></li></ul></div><!--[--><!--]--></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link label" href="https://github.com/liujia6/liujia6.github.io/edit/main/工程化/package.json.md" aria-label="帮助我们改善此页面！" rel="noopener noreferrer" target="_blank"><!--[--><svg class="edit-icon" viewbox="0 0 1024 1024"><g fill="currentColor"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></g></svg><!--]-->帮助我们改善此页面！<!----></a></div><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 41950983+liujia6@users.noreply.github.com">Liu Jia</span><!----><!--]--><!--]--></span></div></div></footer><nav class="vp-page-nav" aria-label="page navigation"><a class="route-link auto-link prev" href="/%E5%B7%A5%E7%A8%8B%E5%8C%96/git.html" aria-label="git"><div class="hint"><span class="arrow left"></span> Prev</div><div class="link"><span>git</span></div></a><a class="route-link auto-link next" href="/%E5%B7%A5%E7%A8%8B%E5%8C%96/%E4%BB%A3%E7%A0%81%E9%A3%8E%E6%A0%BC%E7%BB%9F%E4%B8%80%E6%8C%87%E5%8D%97.html" aria-label="代码风格统一指南"><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span>代码风格统一指南</span></div></a></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-BrW2q7b4.js" defer></script>
  </body>
</html>
