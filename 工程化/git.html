<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>git | 游离 の Blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.1cdd1db5.css" as="style"><link rel="preload" href="/assets/js/app.301264ef.js" as="script"><link rel="preload" href="/assets/js/2.491aa157.js" as="script"><link rel="preload" href="/assets/js/43.599a58a3.js" as="script"><link rel="prefetch" href="/assets/js/10.c14c6624.js"><link rel="prefetch" href="/assets/js/11.a9937c4e.js"><link rel="prefetch" href="/assets/js/12.b046b473.js"><link rel="prefetch" href="/assets/js/13.01aa47ff.js"><link rel="prefetch" href="/assets/js/14.f42daf23.js"><link rel="prefetch" href="/assets/js/15.fb6a03fc.js"><link rel="prefetch" href="/assets/js/16.3d6029c1.js"><link rel="prefetch" href="/assets/js/17.e7fd4a45.js"><link rel="prefetch" href="/assets/js/18.2eee2a30.js"><link rel="prefetch" href="/assets/js/19.c7a805c8.js"><link rel="prefetch" href="/assets/js/20.6ec04b81.js"><link rel="prefetch" href="/assets/js/21.d6a9c37a.js"><link rel="prefetch" href="/assets/js/22.d54975c6.js"><link rel="prefetch" href="/assets/js/23.dd01fe58.js"><link rel="prefetch" href="/assets/js/24.5b080a00.js"><link rel="prefetch" href="/assets/js/25.3e3a8a4d.js"><link rel="prefetch" href="/assets/js/26.530f08ad.js"><link rel="prefetch" href="/assets/js/27.4ff6770f.js"><link rel="prefetch" href="/assets/js/28.4772ab22.js"><link rel="prefetch" href="/assets/js/29.59c92581.js"><link rel="prefetch" href="/assets/js/3.2a78adba.js"><link rel="prefetch" href="/assets/js/30.8945c40e.js"><link rel="prefetch" href="/assets/js/31.71ea1936.js"><link rel="prefetch" href="/assets/js/32.242631cf.js"><link rel="prefetch" href="/assets/js/33.3096cd30.js"><link rel="prefetch" href="/assets/js/34.65f27a2b.js"><link rel="prefetch" href="/assets/js/35.8a5e22fe.js"><link rel="prefetch" href="/assets/js/36.b8444b82.js"><link rel="prefetch" href="/assets/js/37.07333cdf.js"><link rel="prefetch" href="/assets/js/38.c9340582.js"><link rel="prefetch" href="/assets/js/39.86b27506.js"><link rel="prefetch" href="/assets/js/4.6c7e408b.js"><link rel="prefetch" href="/assets/js/40.3e8e0e91.js"><link rel="prefetch" href="/assets/js/41.4abf36b5.js"><link rel="prefetch" href="/assets/js/42.b93937ca.js"><link rel="prefetch" href="/assets/js/44.58c0ac23.js"><link rel="prefetch" href="/assets/js/45.a007e26f.js"><link rel="prefetch" href="/assets/js/46.9aebcd42.js"><link rel="prefetch" href="/assets/js/47.ac13be33.js"><link rel="prefetch" href="/assets/js/48.34e99078.js"><link rel="prefetch" href="/assets/js/49.195b0aef.js"><link rel="prefetch" href="/assets/js/5.82c6f654.js"><link rel="prefetch" href="/assets/js/50.964a51b7.js"><link rel="prefetch" href="/assets/js/51.b0b85444.js"><link rel="prefetch" href="/assets/js/52.755194bb.js"><link rel="prefetch" href="/assets/js/53.bd98d30b.js"><link rel="prefetch" href="/assets/js/54.51fa13df.js"><link rel="prefetch" href="/assets/js/55.3b27f82c.js"><link rel="prefetch" href="/assets/js/56.2d5f09af.js"><link rel="prefetch" href="/assets/js/57.59e5bf64.js"><link rel="prefetch" href="/assets/js/58.4da215bb.js"><link rel="prefetch" href="/assets/js/59.f0dd1160.js"><link rel="prefetch" href="/assets/js/6.5245781e.js"><link rel="prefetch" href="/assets/js/60.8a3a51dc.js"><link rel="prefetch" href="/assets/js/61.2d221c84.js"><link rel="prefetch" href="/assets/js/62.1efabc55.js"><link rel="prefetch" href="/assets/js/63.fad6ede3.js"><link rel="prefetch" href="/assets/js/64.16603306.js"><link rel="prefetch" href="/assets/js/65.fa49138c.js"><link rel="prefetch" href="/assets/js/66.881a3bb5.js"><link rel="prefetch" href="/assets/js/67.25cbb4cf.js"><link rel="prefetch" href="/assets/js/68.117eca53.js"><link rel="prefetch" href="/assets/js/69.053855dc.js"><link rel="prefetch" href="/assets/js/7.fc1bdbb6.js"><link rel="prefetch" href="/assets/js/70.7721e7e9.js"><link rel="prefetch" href="/assets/js/71.29a557ad.js"><link rel="prefetch" href="/assets/js/72.1a6f90ae.js"><link rel="prefetch" href="/assets/js/73.913d468a.js"><link rel="prefetch" href="/assets/js/74.96968d72.js"><link rel="prefetch" href="/assets/js/75.01b38a33.js"><link rel="prefetch" href="/assets/js/76.f82ae778.js"><link rel="prefetch" href="/assets/js/77.68514817.js"><link rel="prefetch" href="/assets/js/78.56b87e13.js"><link rel="prefetch" href="/assets/js/79.9ac9d757.js"><link rel="prefetch" href="/assets/js/8.f060be44.js"><link rel="prefetch" href="/assets/js/80.6090f235.js"><link rel="prefetch" href="/assets/js/81.7de2f01b.js"><link rel="prefetch" href="/assets/js/82.1b7be951.js"><link rel="prefetch" href="/assets/js/83.1104bfb5.js"><link rel="prefetch" href="/assets/js/84.7e0dbb84.js"><link rel="prefetch" href="/assets/js/85.abb461ec.js"><link rel="prefetch" href="/assets/js/86.2e77efbc.js"><link rel="prefetch" href="/assets/js/87.b93727f5.js"><link rel="prefetch" href="/assets/js/88.b554117b.js"><link rel="prefetch" href="/assets/js/89.c1306298.js"><link rel="prefetch" href="/assets/js/9.18126abf.js"><link rel="prefetch" href="/assets/js/90.328f05cd.js"><link rel="prefetch" href="/assets/js/91.8008e0b0.js"><link rel="prefetch" href="/assets/js/92.8b4dca37.js"><link rel="prefetch" href="/assets/js/93.9f7d7273.js"><link rel="prefetch" href="/assets/js/94.176890d0.js"><link rel="prefetch" href="/assets/js/95.a69dbea6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1cdd1db5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">游离 の Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/vuejs/vuepress" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/vuejs/vuepress" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Dev Ops</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>工程化</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/工程化/git.html" class="active sidebar-link">git</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/工程化/git.html#分支" class="sidebar-link">分支</a></li><li class="sidebar-sub-header"><a href="/工程化/git.html#merge" class="sidebar-link">merge</a></li><li class="sidebar-sub-header"><a href="/工程化/git.html#撤销更改" class="sidebar-link">撤销更改</a></li><li class="sidebar-sub-header"><a href="/工程化/git.html#revert" class="sidebar-link">revert</a></li><li class="sidebar-sub-header"><a href="/工程化/git.html#重写历史-amend" class="sidebar-link">重写历史 --amend</a></li><li class="sidebar-sub-header"><a href="/工程化/git.html#cherrypick" class="sidebar-link">cherryPick</a></li><li class="sidebar-sub-header"><a href="/工程化/git.html#rebase-变基" class="sidebar-link">rebase 变基</a></li><li class="sidebar-sub-header"><a href="/工程化/git.html#交互式变基" class="sidebar-link">交互式变基</a></li><li class="sidebar-sub-header"><a href="/工程化/git.html#patch-补丁" class="sidebar-link">patch 补丁</a></li><li class="sidebar-sub-header"><a href="/工程化/git.html#submodule" class="sidebar-link">submodule</a></li><li class="sidebar-sub-header"><a href="/工程化/git.html#tag" class="sidebar-link">tag</a></li><li class="sidebar-sub-header"><a href="/工程化/git.html#default-config" class="sidebar-link">default.config</a></li><li class="sidebar-sub-header"><a href="/工程化/git.html#修改远程仓库地址并推代码" class="sidebar-link">修改远程仓库地址并推代码</a></li><li class="sidebar-sub-header"><a href="/工程化/git.html#配置别名" class="sidebar-link">配置别名</a></li><li class="sidebar-sub-header"><a href="/工程化/git.html#node常用命令" class="sidebar-link">node常用命令</a></li><li class="sidebar-sub-header"><a href="/工程化/git.html#参考" class="sidebar-link">参考</a></li></ul></li><li><a href="/工程化/package.json.html" class="sidebar-link">package.json</a></li><li><a href="/工程化/模块化.html" class="sidebar-link">模块化</a></li><li><a href="/工程化/测试.html" class="sidebar-link">前端自动化测试</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>网络</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>计算机基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>编程</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>其他</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="git"><a href="#git" class="header-anchor">#</a> git</h1> <p>基本命令：<a href="http://www.ruanyifeng.com/blog/2015/12/git-cheat-sheet.html" target="_blank" rel="noopener noreferrer">常用 git 命令清单<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="分支"><a href="#分支" class="header-anchor">#</a> <strong>分支</strong></h2> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> branch -a               查看所有分支
<span class="token function">git</span> remote show origin       可以展示远程的信息
<span class="token function">git</span> remote prune origin   删除远程所有已经删除的分支，但是本地没有更新远程的分支
<span class="token function">git</span> branch -D gh-pages 删除分支（不管它有没有merge）

<span class="token function">git</span> fetch --prune       删除远程所有已经删除但是本地没有依然有的分支
<span class="token function">git</span> branch -D <span class="token operator">&lt;</span>branchname<span class="token operator">&gt;</span>  删除本地没有被合并的分支
<span class="token function">git</span> push <span class="token operator">&lt;</span>远程主机名<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>本地分支名<span class="token operator">&gt;</span>:<span class="token operator">&lt;</span>远程分支名<span class="token operator">&gt;</span>
<span class="token function">git</span> push origin <span class="token builtin class-name">test</span>          推送本地test分支到远程，远程没有就新建
<span class="token function">git</span> push --all origin        将所有本地分支都推送到origin主机。
Git branch -m oldbranchname newbranchname  本地分支重命名
</code></pre></div><h3 id="git-修改本地或远程分支名称"><a href="#git-修改本地或远程分支名称" class="header-anchor">#</a> Git 修改本地或远程分支名称</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> branch -m oldBranch newBranch  <span class="token comment">#将本地分支重命名</span>
<span class="token function">git</span> push --delete origin oldBranch  <span class="token comment">#删除远程分支（远端无此分支则跳过该步骤）</span>
<span class="token function">git</span> push origin newBranch  <span class="token comment">#将重命名后的分支推到远端</span>
<span class="token function">git</span> branch --set-upstream-to origin/newBranch <span class="token comment">#把修改后的本地分支与远程分支关联</span>
</code></pre></div><h3 id="master-分支自动创建"><a href="#master-分支自动创建" class="header-anchor">#</a> master 分支自动创建</h3> <p>因为 git 的分支必须指向一个 commit，没有任何 commit 就没有任何分支</p> <p>提交第一个 commit 后，例如在空仓库里添加一个 README 文件，git 则回自动创建 master 分支</p> <h2 id="merge"><a href="#merge" class="header-anchor">#</a> <a href="https://backlog.com/git-tutorial/cn/stepup/stepup1_4.html" target="_blank" rel="noopener noreferrer">merge<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h2> <ul><li><p>fast-forward（快进）合并</p> <ul><li>没有冲突，直接移动 HEAD 到最新的 commit</li> <li>如果执行了 Fast Forward，开发者根本不会看到这个分支，就像在 master 直接 commit 一样。</li> <li>一旦删除分支或者分支指针往前走，很难体现该处提交是合并自某个分支的。</li></ul></li> <li><p>non fast-forward</p> <ul><li><p>在 merge 分支上有其他分支的最新提交并与自己的提交有冲突，会产生 non fast-forward 合并，会多出一个 commit</p></li> <li><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> merge --no-ff -m <span class="token string">&quot;commit描述&quot;</span> 要合并的分支名
</code></pre></div></li></ul></li></ul> <img src="https://segmentfault.com/img/bV9qte?w=1008&amp;h=836" alt="img" style="zoom:50%;"> <p>Merge 和 rebase 都是合并历史记录，但是各自的特征不同。</p> <ul><li><strong>merge</strong>
保持修改内容的历史记录，但是历史记录会很复杂。</li> <li><strong>rebase</strong>
历史记录简单，是在原有提交的基础上将差异内容反映进去。
因此，可能导致原本的提交内容无法正常运行。</li></ul> <p>您可以根据开发团队的需要分别使用 merge 和 rebase。
例如，想简化历史记录，</p> <ul><li>在 topic 分支中更新 merge 分支的最新代码，请使用 rebase。</li> <li>向 merge 分支导入 topic 分支的话，先使用 rebase，再使用 merge。</li></ul> <p><a href="https://www.jianshu.com/p/58a166f24c81" target="_blank" rel="noopener noreferrer">git-merge 完全解析<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="撤销更改"><a href="#撤销更改" class="header-anchor">#</a> <strong>撤销更改</strong></h2> <p><img src="https://i.loli.net/2021/01/09/TfbZnAsQI5majG9.png" alt="image-20210109103451980"></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> reset --hard HEAD^^       --回到前两次提交
<span class="token function">git</span> reset --hard <span class="token operator">&lt;</span>commitid<span class="token operator">&gt;</span>  回到commitId所属次数的提交状态
</code></pre></div><p>git reset --hard HEAD^^ --回到前两次提交
git reset --hard &lt;commitid&gt; 回到 commitId 所属次数的提交状态</p> <p>如果我们使用了 git reset --hard &lt;commitID&gt; 不小心撤掉了一次重要的修改，也是可以补救回来的
我们通过 git flog 命令找到对应 commit 记录的 commit，然后再执行 git reset --hard &lt;commitID&gt;就可以恢复到我们指定那一次提交的状态中</p> <h2 id="revert"><a href="#revert" class="header-anchor">#</a> revert</h2> <p>git revert &lt;commitID&gt; 撤消指定 commit，作为一个新的 commit。</p> <p><img src="https://i.loli.net/2021/01/09/wgPDu4iGK5BYsTo.png" alt="image-20210109103515706"></p> <p>如果你已经 push 到线上代码库, reset 删除指定 commit 以后,你 git push 可能导致一大堆冲突.需要用 git push -f 才能 push 上去，但是这种做法有风险，如果我们用 git revert 并不会有任何冲突，所以相对来说一般用 git revert 来撤销已经的 push 操作</p> <h2 id="重写历史-amend"><a href="#重写历史-amend" class="header-anchor">#</a> <strong>重写历史 --amend</strong></h2> <p>--amend 选项可以让当前提交合并到上一次提交中作为一次提交</p> <p>git commit --amend 最终你只会有一个提交 - 第二次提交将代替第一次提交的结果。将最后一次的提交信息载入到编辑器中供你修改。 当保存并关闭编辑器后，编辑器会将更新后的提交信息写入新提交中，它会成为新的最后一次提交。</p> <p>git commit --amend -m ’xxx‘ 修改上次提交的信息</p> <p>git commit --amend --no-edit 跳过修改提交信息环节</p> <p>vscdoe 自带的 git 工具也有相关简单操作，知道对应操作后不难理解</p> <p><img src="https://i.loli.net/2021/01/09/QJpr5LRkgv6sUmw.png" alt="image-20210109103557081"></p> <h2 id="cherrypick"><a href="#cherrypick" class="header-anchor">#</a> cherryPick</h2> <p>我们可能会有这样一个使用场景，在分支 branch-a 需要分支 branch-b 的某次提交，这个时候我们就可以先找到 branch-b 的那次提交记录的 id，然后在 branch-a 分支进行 git cherry-pick b-commit-id 将 branch-b 分支的提交记录拿过来了</p> <p>比如在功能性迭代开发中发现一个 bug，并提交了一个 commit 进行修复，但是发现该 bug 也存在线上的发布版本上，必须要尽快对线上进行修复，此时可以使用 git cherry-pick 将 bug 修复的 commit 嫁接到 fix 分支上进行代码修复，并及时发布，解决线上 bug。</p> <p>git cherry-pick &lt;commit-id&gt; 将指定 commit 添加到当前分支</p> <p>git cherry-pick -x &lt;commit_id&gt; 增加 -x 参数，表示保留原提交的作者信息进行提交。</p> <p>git cherry_pick &lt;start-commit-id&gt;…&lt;end-commit-id&gt; 它的范围就是 start-commit-id 到 end-commit-id 之间所有的 commit，但是它这是一个 (左开，右闭] 的区间，也就是说，它将不会包含 start-commit-id 的 commit。</p> <p>git cherry-pick &lt;start-commit-id&gt;^...&lt;end-commit-id&gt; 包含 start-commit-id 的话，就需要使用 ^ 标记一下，就会变成一个 [左闭，右闭] 的区间，具体命令如下</p> <h3 id="从其他代码库-cherry-pick-commit"><a href="#从其他代码库-cherry-pick-commit" class="header-anchor">#</a> 从其他代码库 cherry-pick commit</h3> <div class="language- extra-class"><pre class="language-text"><code>git remote add endel git://github.com/endel/rest-client.git

git fetch endel want-cherry-pick-branch

git log endel/want-cherry-pick-branch

git cherry-pick 97fedac
</code></pre></div><h2 id="rebase-变基"><a href="#rebase-变基" class="header-anchor">#</a> <strong>rebase 变基</strong></h2> <p>你可以使用 rebase 变基命令将提交到某一分支上的所有修改都移至另一分支上，就好像“重新播放”一样。</p> <p>效果和 git merge 命令相比类似，但是各有不同的用处</p> <ul><li>rebase 操作可以把本地未 push 的分叉提交历史整理成直线；</li> <li>rebase 的目的是使得我们在查看历史提交的变化时更容易，因为分叉的提交需要三方对比。</li></ul> <p><strong>使用原则</strong>：一般我们这样做的目的是为了确保在向远程分支推送时能保持提交历史的整洁</p> <p>所以，原则是只对尚未推送或分享给别人的<strong>本地修改</strong>执行变基操作清理历史， 从不对已推送至别处的提交执行变基操作</p> <p><strong>使用场景</strong>：比如当我们向他人维护的开源项目提交修改时，肯定要先在自己的分支中进行开发，然后再提交，但如果我们变基后再提交，维护人员就不用进行整合工作了，直接快速合并即可。</p> <p><strong>git rebase 原理</strong> ：其实是先将 HEAD 指向目标分支和当前分支的共同祖先 commit 节点，然后将当前分支上的 commit 一个一个的 cherryPick 到目标分支上，cherryPick 完以后再将 HEAD 指向当前分支。</p> <p>具体使用方法可以看<a href="https://git-scm.com/book/zh/v2/Git-%E5%88%86%E6%94%AF-%E5%8F%98%E5%9F%BA" target="_blank" rel="noopener noreferrer">gitBook 变基<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><strong>使用：</strong></p> <p><code>git rebase \&lt;basebranch&gt; \&lt;topicbranch&gt;</code> 将主题分支变基到目标分支上，即把 topicbranch 放到 basebranch 后面提交</p> <p><code>git rebase --onto master server client</code>取出 client 分支，找出 server 分支之后的分歧的补丁， 然后把它们在 master 分支上重放一遍</p> <p>在 rebase 的过程中，也许会出现冲突(conflict). 在这种情况，Git 会停止 rebase 并会让你去解决 冲突；在解决完冲突后，用&quot;git-add&quot;命令去更新这些内容的索引(index), 然后，你无需执行 git-commit,只要执行:</p> <p><code>git rebase --continue</code> 这样 git 会继续应用(apply)余下的补丁。</p> <p>在任何时候，你可以用 git rebase --abort 来终止 rebase 的行动，并且&quot;mywork&quot; 分支会回到 rebase 开始前的状态。</p> <p>git pull = git fetch + git merge</p> <p>git pull --rebase = git fetch + git rebase</p> <p>当一个分支下有多人协作，那么就算在同时开发由于不同的人会在同一个分支下产生多个提交记录，那么如果这时候你 push 会报错，当提示你再 pull 代码的时候就会自动合并产生一次 merge 提交，如果我们用 git pull --rebase 就可以将直接提交，并且分支是只有一条线的，但是这时如果有冲突的话 rebase 会暂停等你解决冲突</p> <h2 id="交互式变基"><a href="#交互式变基" class="header-anchor">#</a> <a href="https://blog.csdn.net/zwlove5280/article/details/46649799" target="_blank" rel="noopener noreferrer"><strong>交互式变基</strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h2> <p>rebase 除了可以把本地未 push 的分叉提交历史整理成直线，</p> <p>还有一个功能就是使用交互式变基-i 参数来灵活地修改整理 commit 历史，如 commit 的合并、顺序调整、任意一次或批量的 commit 提交信息修改都可使用交互式变基实现</p> <p>语法：<code>git rebase -i [startpoint] [endpoint]</code></p> <p>git rebase -i HEAD~4 省略 endpoint，意思是修改从最近一次提交开始的 4 次提交记录</p> <p>执行命令后会弹出一个文本文件如下，我们进行相应修改后，关闭文本框，命令行就会继续操作</p> <p>常用的几个标识命令</p> <ul><li>pick 就是表示该提交对象正在使用，普通提交默认就是 pick</li> <li>reword 就是在提交的同时你可以编辑 commit message，它会在执行的时候弹出一个文本让你编辑信息，当你退出的时候，会继续执行命令</li> <li>edit 可以编辑指定提交的文件 *，*也会应用此提交，但是会在应用时停止，提示用户使用 <em>git commit --amend</em> 执行提交，以便对提交进行修补。 当用户执行 <em>git commit --amend</em> 完成提交后，还需要执行 <em>git rebase --continue</em> 继续变基操作。Git 会对用户进行相应的提示。 实际上用户在变基暂停状态执行修补提交可以执行多次，相当于把一个提交分解为多个提交。而且 <em>edit</em> 动作也可以实现 <em>reword</em> 的动作，因此对于老版本的 Git 没有 <em>reword</em> 可用，则可以使用此动作。</li> <li>squash，合并此条记录到前一个记录中，并且会弹出一个文本，上面有两次提交的 message，需要手动修改为合并后的 message，如果连续修改几个记录为 squash，那么会产生叠加合并，可以同时合并几个 commit</li> <li>fixup ，合并此条记录到前一个记录中，但是直接忽略此条 commit message，最终显示前一个记录的 message，连续修改同样也可以同时合并几个 commit 并且取早的一次提交 message</li> <li>通过删除指定行来直接删除指定提交</li> <li>通过交换行的顺序实现 commit 顺序的调整</li></ul> <p>合并的过程中如果遇到冲突，解决后需要 git add ，然后 git rebase --continue，如果想中止，使用 git rebase --abort。</p> <p>改为 reword 后弹出文本框如下有指定提交的 commit message，我们修改再保存</p> <p>改为 quash 后文本显示两次的提交信息，我们修改保存本次的提交信息</p> <h2 id="patch-补丁"><a href="#patch-补丁" class="header-anchor">#</a> <strong>patch 补丁</strong></h2> <p>patch 补丁即为根据 git diff 生成的文本内容文件，最简单的生成方法为 git diff &gt; test.patch</p> <p>生成 patch 文件后，在项目下使用 git apply test.patch，会根据 patch 文件内的信息，在现有文件中添加或删除内容</p> <p>使用场景：假如发现某个项目有 bug，而自己又没有 git 的提交权限，那么此时最合适的解决方法就是用 diff 命令做一个补丁发给项目成员。项目成员通过 patch 命令可以立刻知道你的意图。</p> <p><code>git patch formate-patch -s &lt;start-commit&gt; &lt;end-commit&gt;</code>可以批量生成 patch 文件,-s 参数代表生成自己的 GPG 签名信息</p> <h2 id="submodule"><a href="#submodule" class="header-anchor">#</a> <strong>submodule</strong></h2> <p>含有子仓库的父仓库在 clone 时，子仓库目录为空，在 clone 时下载包括子仓库的内容</p> <p><code>git clone --recursive submodules url</code> <strong>如果 clone 时忘记用上面的--recurse-submodules 命令了可以再使用 一下命令将仓库中的子仓库 clone 下来</strong></p> <p><code>git submodule update --init --recursive</code></p> <p>注意：此处拉的是父仓库记录的每个子仓库的某个 commit，而不是最新的子仓库 commit，如下图所示记录的子仓库的的 commitID, 如果需要拉到最新的远程仓库的一次 commit，需要用到**–-remote 参数**</p> <ul><li><code>git submodule update --init --recursive --remote</code> 按照远程最新 commit 初始化子仓库</li> <li><code>git submodule update --recursive --remote</code> 更新本地仓库，与远程仓库同步</li></ul> <p><strong>添加子仓库</strong></p> <p><code>git submodule add https://github.com/chaconinc/DbConnector path</code> 子模块会将子项目放到一个与仓库同名的目录中，本例中是 “DbConnector”</p> <p><strong>远程数据更新 所有 子模块</strong> <code>git submodule update --remote</code></p> <p><strong>foreach 子模块命令，它能在每一个子模块中运行任意命令</strong> <code>git submodule foreach 'git stash'</code> <code>git submodule foreach 'git checkout -b featureA'</code></p> <p><strong>删除 submodule</strong></p> <div class="language- extra-class"><pre><code>1. 在“.gitmodules”文件中删除相应配置信息。
2. 执行“git rm –cached ”命令将子模块所在的文件从git中删除。
</code></pre></div><p><strong>修改 submodule 的 url 和分支</strong></p> <div class="language- extra-class"><pre><code>1. 修改.gitmodules文件的对应url和branch
2. 执行git submodule sync ，该命令是为了让将新的URL更新到文件`.git/config`；
3. 执行git submodule update --force --recursive --init --remote。该命令会抓取修改过的最新的shared仓库并初始化。
</code></pre></div><p><strong>合并 submodule 作为仓库代码</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> submodule update --init
<span class="token comment"># 先备份仓库文件</span>
<span class="token function">mv</span> src/shared ./
<span class="token comment"># 卸载子仓库</span>
<span class="token function">git</span> submodule deinit src/shared
<span class="token comment"># 删除git submodule缓存</span>
<span class="token function">git</span> <span class="token function">rm</span> --cached src/shared
<span class="token comment"># 再把文件移回正确位置</span>
<span class="token function">mv</span> shared/* src/shared
<span class="token comment"># 删除备份</span>
<span class="token function">rm</span> -rf shared
<span class="token comment"># 提交</span>
<span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>
<span class="token function">git</span> commit -m <span class="token string">'feat: 合并shared'</span>
</code></pre></div><h2 id="tag"><a href="#tag" class="header-anchor">#</a> <strong>tag</strong></h2> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> tag -a v1.0.0 -m <span class="token string">&quot;内容：v1.0.0&quot;</span>   <span class="token comment">#创建标签</span>
<span class="token function">git</span> tag <span class="token operator">&lt;</span>tagname<span class="token operator">&gt;</span>               <span class="token comment">#轻量标签</span>
<span class="token function">git</span> tag                         <span class="token comment">#列出所有tag</span>
<span class="token function">git</span> push origin v1.0.0           <span class="token comment">#推送标签</span>
<span class="token function">git</span> tag -d v1.0.0                 <span class="token comment">#删除本地</span>
<span class="token function">git</span> push origin :refs/tags/v1.0.0     <span class="token comment">#删除远程的</span>
<span class="token function">git</span> tag                        <span class="token comment">#显示所有的tag</span>
<span class="token function">git</span> tag -l <span class="token string">'v1.0.*'</span>                 <span class="token comment">#查看某个版本系列的tag</span>
<span class="token function">git</span> show v0.0.6                 <span class="token comment">#查看标签的详情，可以看到你commit的内容</span>
<span class="token function">git</span> push origin --tags  <span class="token comment">#把所有不在远程仓库服务器上的标签全部传送到那里。</span>
<span class="token function">git</span> checkout branchName tagName  <span class="token comment">#从tag且切分支</span>
</code></pre></div><h2 id="default-config"><a href="#default-config" class="header-anchor">#</a> default.config</h2> <p>当我们用 git branch -m oldBranch newBranch 修改当前分支的名字，我们再 push 时会出现以下提示</p> <p><img src="https://i.loli.net/2021/01/09/YKUArWSjR4BQ5qO.png" alt="image-20210109104053375"></p> <p>我们可以配置 push.default</p> <p>The <strong>current</strong> in this setup means that by default you will <strong>only push the current branch</strong> when you do <strong>git push</strong></p> <p>Other options are:</p> <ul><li><p>nothing : Do not push anything</p></li> <li><p>matching : Push all matching branches (default)</p></li> <li><p>tracking : Push the current branch to whatever it is tracking</p></li> <li><p>current : Push the current branch</p></li> <li><p><code>simple</code>: (new in Git 1.7.11) like upstream, but refuses to push if the upstream branch's name is different from the local one</p> <p>This is the safest option and is well-suited for beginners.</p> <p>This mode has become the default in Git 2.0.</p></li></ul> <p>查看当前的 push.default 配置:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> config --global push.default
</code></pre></div><p>修改配置:</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">git</span> config --global push.default curr
</code></pre></div><h2 id="修改远程仓库地址并推代码"><a href="#修改远程仓库地址并推代码" class="header-anchor">#</a> <strong>修改远程仓库地址并推代码</strong></h2> <p>查看远程仓库的 url</p> <div class="language-shell extra-class"><pre class="language-shell"><code>$ <span class="token function">git</span> remote -v
<span class="token operator">&gt;</span> origin  git@github.com:USERNAME/REPOSITORY.git <span class="token punctuation">(</span>fetch<span class="token punctuation">)</span>
<span class="token operator">&gt;</span> origin  git@github.com:USERNAME/REPOSITORY.git <span class="token punctuation">(</span>push<span class="token punctuation">)</span>使用 <span class="token function">git</span> remote set-url 命令将远程的 URL 从 SSH 更改为 HTTPS。
$ <span class="token function">git</span> remote set-url origin https://github.com/USERNAME/REPOSITORY.git
</code></pre></div><h2 id="配置别名"><a href="#配置别名" class="header-anchor">#</a> <a href="https://juejin.cn/post/6844903976245133326#heading-1" target="_blank" rel="noopener noreferrer">配置别名<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h2> <p>别名配置保存在 ~/.gitconfig 文件</p> <p>git config --global alias.rc 'rebase --continue'</p> <h2 id="node常用命令"><a href="#node常用命令" class="header-anchor">#</a> node常用命令</h2> <ul><li>获取最近的commit-id: <code>git rev-parse --short HEAD</code></li> <li>获取最近的commit-message: <code>git log -1 --pretty=%B</code></li></ul> <h2 id="参考"><a href="#参考" class="header-anchor">#</a> 参考</h2> <p><a href="https://git-scm.com/book/zh/v2/" target="_blank" rel="noopener noreferrer">GIT-BOOK<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://juejin.im/post/5925a2d9a22b9d0058b0fd9b#heading-3" target="_blank" rel="noopener noreferrer">cherry-pick<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://juejin.im/post/5a7a5860f265da4e8409175c" target="_blank" rel="noopener noreferrer">patch 的妙用<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://www.cnblogs.com/mengff/p/11608864.html" target="_blank" rel="noopener noreferrer">git rebase 使用场景<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://zhuanlan.zhihu.com/p/42929114" target="_blank" rel="noopener noreferrer">Git 误操作救命篇一： 如何将改动撤销？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/vuejs/vuepress/edit/master/工程化/git.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面！</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3/30/2023, 7:22:50 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Vue/vue组件双向绑定.html" class="prev">
        实现 vue 父子组件的双向数据绑定
      </a></span> <span class="next"><a href="/工程化/package.json.html">
        package.json
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.301264ef.js" defer></script><script src="/assets/js/2.491aa157.js" defer></script><script src="/assets/js/43.599a58a3.js" defer></script>
  </body>
</html>
