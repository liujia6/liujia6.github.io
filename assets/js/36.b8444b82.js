(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{506:function(t,e,r){"use strict";r.r(e);var a=r(22),s=Object(a.a)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"nginx"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#nginx"}},[t._v("#")]),t._v(" nginx")]),t._v(" "),r("p",[t._v("Nginx 的最重要的几个使用场景：")]),t._v(" "),r("ol",[r("li",[t._v("静态资源服务，通过本地文件系统提供服务；")]),t._v(" "),r("li",[t._v("反向代理服务，延伸出包括缓存、负载均衡等；")]),t._v(" "),r("li",[t._v("API 服务，OpenResty ；")])]),t._v(" "),r("h3",{attrs:{id:"动静分离"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#动静分离"}},[t._v("#")]),t._v(" 动静分离")]),t._v(" "),r("p",[r("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/SHERlocked93/pic@env/uPic/2020-03-09-%E5%8A%A8%E9%9D%99%E5%88%86%E7%A6%BB.png",alt:"动静分离"}})]),t._v(" "),r("p",[t._v("Nginx 的高并发和静态资源缓存等特性，经常将静态资源部署在 Nginx 上。")]),t._v(" "),r("p",[t._v("如果请求的是静态资源，直接到静态资源目录获取资源，")]),t._v(" "),r("p",[t._v("如果是动态资源的请求，则利用反向代理的原理，把请求转发给对应后台应用去处理，从而实现动静分离。")]),t._v(" "),r("h2",{attrs:{id:"location-匹配"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#location-匹配"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://juejin.cn/post/6844903849166110733#heading-2",target:"_blank",rel:"noopener noreferrer"}},[t._v("location 匹配"),r("OutboundLink")],1)]),t._v(" "),r("h3",{attrs:{id:"匹配优先级"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#匹配优先级"}},[t._v("#")]),t._v(" 匹配优先级")]),t._v(" "),r("ol",[r("li",[t._v("精确匹配 =")]),t._v(" "),r("li",[t._v("前缀匹配 ^~（立刻停止后续的正则搜索）")]),t._v(" "),r("li",[t._v("按文件中顺序的正则匹配 ~或~*")]),t._v(" "),r("li",[t._v("匹配不带任何修饰的前缀匹配。")]),t._v(" "),r("li",[t._v("正则匹配是使用文件中的顺序，找到返回")])]),t._v(" "),r("table",[r("thead",[r("tr",[r("th",[t._v("符号")]),t._v(" "),r("th",[t._v("含义")])])]),t._v(" "),r("tbody",[r("tr",[r("td",[t._v("~")]),t._v(" "),r("td",[t._v("区分大小写的正则匹配")])]),t._v(" "),r("tr",[r("td",[t._v("~*")]),t._v(" "),r("td",[t._v("不区分大小写的正则匹配")])]),t._v(" "),r("tr",[r("td",[t._v("^~")]),t._v(" "),r("td",[t._v("前缀匹配，不匹配正则，优先正则匹配")])]),t._v(" "),r("tr",[r("td",[t._v("/document")]),t._v(" "),r("td",[t._v("普通前缀匹配，前缀匹配下，返回最长匹配的 location，与 location 所在位置顺序无关")])])])]),t._v(" "),r("h2",{attrs:{id:"server-指令块与虚拟主机"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#server-指令块与虚拟主机"}},[t._v("#")]),t._v(" "),r("a",{attrs:{href:"https://segmentfault.com/a/1190000021771733",target:"_blank",rel:"noopener noreferrer"}},[t._v("server 指令块与虚拟主机"),r("OutboundLink")],1)]),t._v(" "),r("p",[t._v("虚拟主机是一种在单一主机或主机群上运行多个网站或服务的技术，可以用来解决 IP 地址资源有限而网站数目日益增多的问题。实现方式主要有以下三种:")]),t._v(" "),r("ul",[r("li",[t._v("基于域名(Name-based)")]),t._v(" "),r("li",[t._v("基于 IP 地址(IP-based)")]),t._v(" "),r("li",[t._v("基于 Port 端口(Port-based)")])]),t._v(" "),r("p",[t._v("HTTP 请求通过 HOST 请求头指定我们要访问的域名，在 HTTP1.0 不支持，1.1 中请求必须带上 Host 请求头，否则服务器必须返回 400 相应，nginx 通过 server 指令配置虚拟主机")]),t._v(" "),r("h3",{attrs:{id:"servername-服务器配置专属开发环境"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#servername-服务器配置专属开发环境"}},[t._v("#")]),t._v(" servername 服务器配置专属开发环境")]),t._v(" "),r("p",[t._v("在服务器上开发时，可以通过 servername 定制自己的域名以及 root 前端打包后的资源，然后再本地配置该域名 host 到该服务器上，则可以访问了")]),t._v(" "),r("p",[t._v("nginx配置")]),t._v(" "),r("div",{staticClass:"language-nginx extra-class"},[r("pre",{pre:!0,attrs:{class:"language-nginx"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("server")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("server_name")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$yourCustomServerName")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("root")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$yourResourcePath")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),r("p",[t._v("host文件")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("$serverIp $yourCustomServerName\n")])])]),r("h2",{attrs:{id:"常见问题"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#常见问题"}},[t._v("#")]),t._v(" 常见问题")]),t._v(" "),r("p",[r("a",{attrs:{href:"https://github.com/febobo/web-interview/issues/31",target:"_blank",rel:"noopener noreferrer"}},[t._v("history 模式的前端页面访问 404 问题解决"),r("OutboundLink")],1),t._v(" "),r("a",{attrs:{href:"https://github.com/mqyqingfeng/Blog/issues/242",target:"_blank",rel:"noopener noreferrer"}},[t._v("一份简单够用的 Nginx Location 配置讲解"),r("OutboundLink")],1)])])}),[],!1,null,null,null);e.default=s.exports}}]);